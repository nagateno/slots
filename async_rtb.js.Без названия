!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="/",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(6),o=n(r);window.bswad=o.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){e.style.width="0px",e.style.height="0px",e.style.overflow="hidden"}function o(){try{return top.location.host}catch(e){return window.location.host}}function a(e){return decodeURIComponent(e.replace(/\+/g," "))}function s(e){return new y.default(function(t,i){var n=document.createElement("div");try{n.innerHTML=a(e)}catch(e){console.log(e)}t(n)})}function l(e,t){for(var i=t.querySelectorAll("*"),n=0;n<i.length;n++)if("SCRIPT"==i[n].nodeName)if(""!=i[n].src){var r=document.createElement("script");for(var o in i[n].attributes)if(i[n].attributes.hasOwnProperty(o)){var a=i[n].attributes[o].name;r[a]=i[n][a]}r.setAttribute("type","text/javascript"),null===i[n].parentNode.parentNode?e.appendChild(r):i[n].parentNode.appendChild(r)}else{if(null===i[n].parentNode.parentNode){e.appendChild(i[n]);var s=e.childNodes[e.childNodes.length-1]}else{i[n].parentNode.appendChild(i[n]);var s=i[n].parentNode.childNodes[i[n].parentNode.childNodes.length-1]}try{eval.call(window,s.innerHTML)}catch(e){console.log(e)}}else null===i[n].parentNode.parentNode?e.insertBefore(i[n],e.childNodes[0]):i[n].parentNode.appendChild(i[n])}function c(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}}function d(){var e=0,t=0;return"number"==typeof top.innerWidth&&(e=top.innerWidth,t=top.innerHeight),{width:e,height:t}}function u(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}}function h(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}function f(){return window.self!==window.top}function p(){var e=!1;try{e=!!top.document}catch(e){return!1}return e}function _(e){var t=void 0;if(f()===!0?p()&&(t=d()):t=c(),null!==t){var i=t.height+m(),n=t.width+v(),r=u(e),o=r.y+t.height>=i-t.height&&i>=r.y,a=n-t.width<=r.x+Number(e.offsetWidth)&&n>=r.x;return a&&o}}function m(){return f()&&p()?top.pageYOffset||top.document.documentElement&&top.document.documentElement.scrollTop||top.document.body&&top.document.body.scrollTop:window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop}function v(){return f()&&p()?top.pageXOffset||top.document.documentElement&&top.document.documentElement.scrollLeft||top.document.body&&top.document.body.scrollLeft:window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft}function b(e,t){function i(){_(e)&&(n.removeEventListener("scroll",i),t())}var n={};n=f()&&p()?top:window,n.addEventListener("scroll",i)}Object.defineProperty(t,"__esModule",{value:!0});var g=i(3),y=n(g);"undefined"==typeof y.default&&(window.Promise=y.default),t.default={build_virtual_dom:s,append_to_dom:l,hide_element:r,get_domain:o,decode:a,get_window_size:c,get_top_size:d,calculate_window_cont:u,add_event:h,check_scroll:_,listen_scroll:b}},,function(e,t,i){(function(t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function r(){}function o(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!=i(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function s(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void a._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?l:c)(t.promise,e._value);var n;try{n=i(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,n)}))}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==("undefined"==typeof t?"undefined":i(t))||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h(o(n,t),e)}e._state=1,e._value=t,d(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)s(e,e._deferreds[t]);e._deferreds=null}function u(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function h(e,t){var i=!1;try{e(function(e){i||(i=!0,l(t,e))},function(e){i||(i=!0,c(t,e))})}catch(e){if(i)return;i=!0,c(t,e)}}var f=setTimeout;a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var i=new this.constructor(r);return s(this,new u(e,t,i)),i},a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){function r(a,s){try{if(s&&("object"==("undefined"==typeof s?"undefined":i(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){r(a,e)},n)}t[a]=s,0===--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},a.resolve=function(e){return e&&"object"==("undefined"==typeof e?"undefined":i(e))&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,i){i(e)})},a.race=function(e){return new a(function(t,i){for(var n=0,r=e.length;n<r;n++)e[n].then(t,i)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},"undefined"!=typeof e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)}(void 0)}).call(t,i(34).setImmediate)},function(e,t){var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=i},function(e,t){(function(t){function i(e){return"object"==typeof e&&null!==e}function n(e){switch({}.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}function r(e){return d()&&"[object ErrorEvent]"==={}.toString.call(e)}function o(e){return void 0===e}function a(e){return"function"==typeof e}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function d(){try{return new ErrorEvent(""),!0}catch(e){return!1}}function u(){if(!("fetch"in I))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function h(e){function t(t,i){var n=e(t)||t;return i?i(n)||n:n}return t}function f(e,t){var i,n;if(o(e.length))for(i in e)v(e,i)&&t.call(null,i,e[i]);else if(n=e.length)for(i=0;i<n;i++)t.call(null,i,e[i])}function p(e,t){return t?(f(t,function(t,i){e[t]=i}),e):e}function _(e){return!!Object.isFrozen&&Object.isFrozen(e)}function m(e,t){return!t||e.length<=t?e:e.substr(0,t)+"…"}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b(e){for(var t,i=[],n=0,r=e.length;n<r;n++)t=e[n],s(t)?i.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&i.push(t.source);return new RegExp(i.join("|"),"i")}function g(e){var t=[];return f(e,function(e,i){t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}),t.join("&")}function y(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var i=t[6]||"",n=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+i+n}}function k(){var e=I.crypto||I.msCrypto;if(!o(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(t[0])+i(t[1])+i(t[2])+i(t[3])+i(t[4])+i(t[5])+i(t[6])+i(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)})}function w(e){for(var t,i=5,n=80,r=[],o=0,a=0,s=" > ",l=s.length;e&&o++<i&&(t=x(e),!("html"===t||o>1&&a+r.length*l+t.length>=n));)r.push(t),a+=t.length,e=e.parentNode;return r.reverse().join(s)}function x(e){var t,i,n,r,o,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),t=e.className,t&&s(t))for(i=t.split(/\s+/),o=0;o<i.length;o++)a.push("."+i[o]);var l=["type","name","title","alt"];for(o=0;o<l.length;o++)n=l[o],r=e.getAttribute(n),r&&a.push("["+n+'="'+r+'"]');return a.join("")}function j(e,t){return!!(!!e^!!t)}function E(e,t){return o(e)&&o(t)}function T(e,t){return!j(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(!E(e.stacktrace,t.stacktrace)&&C(e.stacktrace,t.stacktrace)))}function C(e,t){if(j(e,t))return!1;var i=e.frames,n=t.frames;if(i.length!==n.length)return!1;for(var r,o,a=0;a<i.length;a++)if(r=i[a],o=n[a],r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r.function!==o.function)return!1;return!0}function S(e,t,i,n){var r=e[t];e[t]=i(r),e[t].__raven__=!0,e[t].__orig__=r,n&&n.push([e,t,r])}var I="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};e.exports={isObject:i,isError:n,isErrorEvent:r,isUndefined:o,isFunction:a,isString:s,isArray:l,isEmptyObject:c,supportsErrorEvent:d,supportsFetch:u,wrappedCallback:h,each:f,objectMerge:p,truncate:m,objectFrozen:_,hasKey:v,joinRegExp:b,urlencode:g,uuid4:k,htmlTreeAsString:w,htmlElementAsString:x,isSameException:T,isSameStacktrace:C,parseUrl:y,fill:S}}).call(t,function(){return this}())},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){I.default.config("//8734cece60204f6580dab85edb14b6ca@sentry.betweendigital.com/9",{shouldSendCallback:function(e){var t=/async_rtb\.js/.test(e.culprit);if(t===!1)return!1;if(void 0!==e.exception.values[0]&&void 0!==e.exception.values[0].stacktrace&&void 0!==e.exception.values[0].stacktrace.frames&&e.exception.values[0].stacktrace.frames instanceof Array){if(""===e.exception.values[0].value||e.exception.values[0].value.indexOf("Отказано в доступе")>-1||e.exception.values[0].value.indexOf("Не удается выполнить программу из освобожденного сценария")>-1||e.exception.values[0].value.indexOf("Объект не поддерживает свойство или метод")>-1||e.exception.values[0].value.indexOf("checkSessionState")>-1||e.exception.values[0].value.indexOf("Not implemented")>-1||e.exception.values[0].value.indexOf("Недостаточно памяти")>-1||e.exception.values[0].value.indexOf("Object doesn't support property or method")>-1||e.exception.values[0].value.indexOf("Maximum call stack size exceeded")>-1)return!1;for(var i in e.exception.values[0].stacktrace.frames)if(e.exception.values[0].stacktrace.frames.hasOwnProperty(i)){if(void 0===e.exception.values[0].stacktrace.frames[i].function)return!1;if("wrapped"===e.exception.values[0].stacktrace.frames[i].function||""===e.exception.values[0].stacktrace.frames[i].function||"?"===e.exception.values[0].stacktrace.frames[i].function)return!1}}return!0},dataCallback:function(t){return void 0!==e?t.exception.values[0].value+=" | section="+e.id:t.exception.values[0].value+=" | section=undefined",t}}).install().context(function(){"undefined"==typeof c.default&&(window.Promise=c.default);var t=new C.default;if("in-stream"==e.format)return console.log("Данная видео секция не поддерживается"),!1;if(void 0===e.id)return(0,f.default)([{id:null,where:"async",e:{stack:"section.id undefined",name:"our error",message:"section.id undefined"}}],document,window),!1;if(void 0===e.type)return(0,f.default)([{id:e.id,where:"async",e:{stack:"section.type undefined",name:"our error",message:"section.type undefined"}}],document,window),!1;if(void 0===e.format)return(0,f.default)([{id:e.id,where:"async",e:{stack:"section.format undefined",name:"our error",message:"section.format undefined"}}],document,window),!1;if(null===e.container)return(0,f.default)([{id:e.id,where:"async",e:{stack:"container null",name:"our error",message:"container null"}}],document,window),!1;var i=!0;try{if(i&&"undefined"!=typeof s.default&&window.self===window.top&&(void 0===window["_"+(0,s.default)(window.location.href)]&&(window["_"+(0,s.default)(window.location.href)]={objs:[]},window["_"+(0,s.default)(window.location.href)].count=0),window["_"+(0,s.default)(window.location.href)].count++,window["_"+(0,s.default)(window.location.href)].count>4))return t.blocked(e.container,e.id),t.btw(document,{id:e.id,type:"blocked"}),e.fallback&&_.default.build_virtual_dom(e.fallback).then(function(t){_.default.append_to_dom(e.container,t)}),console.log(e.id+"blocked becouse too much ads on page"),!1}catch(e){console.log(e)}var n=100,r=void 0,a=100*Math.random(),l=5,d=!0,h=!1,p=!0;return e.shown=!1,e.container.style.position="relative",e.container_id=e.container.getAttribute("id"),e.file_version=r,a>n?e.banner_data={ads_url:("http:"===document.location.protocol?"http://":"https://")+"ads.betweendigital.com"}:e.banner_data={ads_url:("http:"===document.location.protocol?"http://":"https://")+"ads.betweendigital.com"},e.logo_domain="//betweendigital.ru",e.logo_params="?utm_source=ssp_banner&utm_medium="+document.location.hostname+"&utm_campaign=iconclick","video"!=e.type&&"full_video"!=e.format||(e.icon=0),function(i,n,r){function a(){v.default.init(e);var r=j.check_scroll(e);if(void 0===r&&(e.in_visible=0),"video"!=e.type&&"out-stream"!=e.format&&"full_video"!=e.format&&(T.iframe(e),_.default.add_event(i,"message",function(t){A.validate(t,e)})),void 0!==e.video_url&&(e.video_url.indexOf("?")==-1?e.video_url+="?rr="+e.banner_data.params.rr:e.video_url+="&rr="+e.banner_data.params.rr,void 0!==e.banner_data.params.pos&&(e.video_url+="&pos="+e.banner_data.params.pos),void 0!==e.banner_data.params.ref&&(e.video_url+="&ref="+e.banner_data.params.ref),void 0!==e.banner_data.params.frl&&(e.video_url+="&frl="+e.banner_data.params.frl),void 0!==e.banner_data.params.fl&&(e.video_url+="&fl="+e.banner_data.params.fl),void 0!==e.banner_data.params.r_seq&&(e.video_url+="&r_seq="+e.banner_data.params.r_seq),void 0!==e.banner_data.params.foc&&(e.video_url+="&foc="+e.banner_data.params.foc)),void 0!==e.other_ad){if("full_video"==e.format&&"adluxe"==e.other_ad){if(""!==n.referrer&&void 0!==n.referrer){var o=n.referrer.split("//")[1].split("/")[0].split(".");if(["yandex","google","bing","yahoo","rambler","mail"].indexOf(o[o.length-2])>-1)return!1}void 0===i.zaglushkaRichAdluxeVast&&(i.zaglushkaRichAdluxeVast=function(){if(console.log("Ошибка в vast файле"),void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].video_fallback){e.container.style.display="block";var i=n.createElement("div");i.innerHTML=e.adds[e.id].video_fallback;var r=i.querySelectorAll("*");O.generate_dom(e,r),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else if(void 0!==e.video_fallback){e.container.style.display="block";var i=n.createElement("div");i.innerHTML=decodeURIComponent(e.video_fallback.replace(/\+/g," "));var r=i.querySelectorAll("*");O.generate_dom(e,r),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else t.noad(e.container,e.id),t.btw(n,{id:e.id,type:"noad"}),e.container.style.display="none"});var a=n.createElement("div");return a.id="alx-Tnneyo",e.container.appendChild(a),function(t){var i=new Date/1,n=t.document,r=n.getElementById("alx-Tnneyo"),o=n.createElement("script");t.alxConfig={t0:i,ph:r,vast:e.video_url,cp:"",it:[],ct:[],H:"Tnneyo"},o.type="text/javascript",o.src="https://r.webturn.ru/Tnneyo;j?"+i,r.appendChild(o)}(i),!1}if("mobile_inpage"==e.format){void 0===i.zaglushkaRichAdluxeVast&&(i.zaglushkaRichAdluxeVast=function(){if(console.log("Ошибка в vast файле"),void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].video_fallback){e.container.style.display="block";var i=n.createElement("div");i.innerHTML=e.adds[e.id].video_fallback;var r=i.querySelectorAll("*");O.generate_dom(e,r),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else if(void 0!==e.video_fallback){e.container.style.display="block";var i=n.createElement("div");i.innerHTML=decodeURIComponent(e.video_fallback.replace(/\+/g," "));var r=i.querySelectorAll("*");O.generate_dom(e,r),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else t.noad(e.container,e.id),t.btw(n,{id:e.id,type:"noad"}),e.container.style.display="none"});var s=n.createElement("div"),l=(i.innerWidth,e.w,0);l=i.innerWidth>e.w?e.w:i.innerWidth,s.style.position="relative",s.style.height=9*l/16+"px",s.style.maxWidth=e.w+"px",s.style.width="100%",s.style.margin="0 auto";var a=n.createElement("div");return a.id="alx-IwiZDL",s.appendChild(a),e.container.appendChild(s),function(t,i,n,r){var o=new Date/1,a=t.document,s=a.getElementById("alx-IwiZDL"),l=a.createElement("script");t.alxConfig={t0:o,ph:s,cp:"",ct:[],H:"IwiZDL",it:[],track:{error:[],creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],resume:[],rewind:[],close:[]},vast:e.video_url,l:{link1:"Click URL"}},l.type="text/javascript",l.src="https://r.webturn.ru/IwiZDL;j?"+o,s.appendChild(l)}(i),!1}}if("floating"==e.format||"full"==e.format||"full_video"==e.format||"video"==e.type&&"floating"==e.format||0==e.in_visible||1==e.in_visible_area){var u=!0;if(d&&("floating"!==e.format&&"full"!=e.format||"center"!=e.pos_x||"center"!=e.pos_y||"mobile"!=e.type||(i.addEventListener("orientationchange",function(){e.shown?C.resize_banner(e):C.check_sizes(e)&&(T.load(e),e.shown=!0)},!1),u=C.check_sizes(e))),u){if(T.load(e),1==e.rotate&&e.in_frame===!1){var h={};h=e.in_frame&&e.fif?top:i,_.default.add_event(h,"scroll",function(){j.check_scroll(e),c()})}e.shown=!0}}else{var h={};h=e.in_frame&&e.fif?top:i,_.default.add_event(h,"scroll",function(){j.check_scroll(e),1==e.rotate&&e.in_frame===!1&&c(),1==e.in_visible_area&&0==e.shown&&(T.load(e),e.shown=!0)})}y.length>0&&(0,f.default)(y,n,i)}function c(){e.in_visible_area?void 0!==b&&0==b.timer_id&&b.inited&&b.ended===!1&&b.start():void 0!==b&&b.timer_id>0&&b.inited&&b.ended===!1&&b.stop()}var m=!0,b=void 0,y=[],w={check_mobile:function(){var e=!1,t=navigator.userAgent||navigator.vendor||i.opera;return void 0!==t&&t.search(/iPad;|iPhone;|iPod|Silk-Accelerated|Kindle|GT-P|Android.+Nexus 7|Android.+Mobile|Android|HTC|BlackBerry|Symb|Nokia|Opera Mini|Phone|Mobile/gi)>-1&&(e=!0),!!e},check_hidden:function(){},check_visible:function(){},init:function(e){this.check_hidden(),this.check_visible(),e.is_mobile=this.check_mobile()}},j={is_in_frame:function(e){C.check_obj(e,"positioner.is_in_frame");try{e.in_frame=i.self!==i.top}catch(t){return y.push({id:e.id,where:"positioner.is_in_frame",e:t}),null}return e.in_frame},is_fif:function(e){C.check_obj(e,"generate_url.is_fif");var t=!1;try{t=!!top.document}catch(t){return y.push({id:e.id,where:"positioner.is_fif",e:t}),!1}e.fif=t},check_overflow:function(e){C.check_obj(e,"positioner.check_overflow");try{var t=_.default.get_window_size(),o=0,a=0,l=0,c=0,d=0,u=0;switch(e.pos_x){case"left":o=0,a=o+parseInt(e.w);break;case"center":o=t.width/2-parseInt(e.w)/2,a=o+parseInt(e.w);break;case"right":o=t.width-parseInt(e.w),a=t.width}switch(e.pos_y){case"top":l=0,c=l+parseInt(e.h);break;case"center":l=t.height/2-parseInt(e.h)/2,c=l+parseInt(e.h);break;case"bottom":l=t.height-parseInt(e.h),c=t.height}if(void 0===e.pos_x&&(o=e.container.offsetLeft,a=e.container.offsetLeft+parseInt(e.w),l=e.container.offsetTop,c=e.container.offsetTop+parseInt(e.h),u=1),r&&"undefined"!=typeof s.default&&i.self===i.top){void 0===i["_"+(0,s.default)(i.location.href)]&&(i["_"+(0,s.default)(i.location.href)]={objs:[]},i["_"+(0,s.default)(i.location.href)].count=0),i["_"+(0,s.default)(i.location.href)].objs.length>0&&i["_"+(0,s.default)(i.location.href)].objs.forEach(function(e){0!=e.r&&0!=u||!(o>=e.x[0]&&o<=e.x[1]||e.x[0]>=o&&e.x[0]<=a)||(l>=e.y[0]&&l<=e.y[1]||e.y[0]>=l&&e.y[0]<=c)&&(d=1)});var h=n.querySelectorAll('div[id^="fl_btw_ad_"]'),p=!1;if(null!==h){for(var m=0;m<h.length;m++)if(h[m].contains(e.container)){p=!0;break}}else p=!0;if(d&&!p)return e.overflow=1,!1;e.overflow=0,i["_"+(0,s.default)(i.location.href)].objs.push({x:[o,a],y:[l,c],r:u})}}catch(t){throw y.push({id:e.id,where:"positioner.check_overflow",e:t}),(0,f.default)(y,n,i),t}},get_styles:function(e){C.check_obj(e,"positioner.get_styles");try{if("full_video"==e.format)var t="display: none; width: 100%;position:relative; margin: auto";else{if("video"==e.type)var r=Number(e.h)+30,t="width:"+e.w+"px;height:"+r+"px;display:none;";else var t="width:"+e.w+"px;height:"+e.h+"px;display:none;";t+="video"!=e.type?"position:fixed;bottom:0;right:0;z-index:9999998;text-align:center;background:rgba(0,0,0,.3);":"position:fixed;bottom:0;right:0;z-index:9999998;text-align:center;",t+="right"==e.pos_x?"right:0px;":"left"==e.pos_x?"left:0px;":"left:50%;margin-left:-"+Math.round(e.w/2)+"px;",t+="bottom"==e.pos_y?"bottom:0px;":"top"==e.pos_y?"top:0px;":"top:50%;margin-top:-"+Math.round(e.h/2)+"px;"}}catch(t){throw y.push({id:e.id,where:"positioner.get_styles",e:t}),(0,f.default)(y,n,i),t}return t},set_style:function(t,r){try{t&&(t.style.setAttribute?t.style.setAttribute("cssText",r):t.setAttribute("style",r))}catch(t){throw y.push({id:e.id,where:"positioner.set_style",e:t}),(0,f.default)(y,n,i),t}},header_pos:function(e){C.check_obj(e,"positioner.header_pos");try{n.body.insertBefore(e.container,n.body.firstChild),e.container.style.textAlign="center"}catch(t){throw y.push({id:e.id,where:"positioner.header_pos",e:t}),(0,f.default)(y,n,i),t}},floating_pos:function(t){C.check_obj(t,"positioner.floating_pos");try{var r=n.body,o=n.createElement("div");if(o.id="fl_btw_ad_"+t.pos_x+t.pos_y,o.style.zIndex="999999999","video"!=t.type){if(this.set_style(o,this.get_styles(t)),o.style.zIndex="999999999","full_video"==t.format){if(void 0===e.other_ad){var a=n.createElement("div");a.id="flex_btw_con",a.setAttribute("style","position:fixed;display:flex; width:100%;height:100%;z-index:99997;top:0;left:0;"),a.appendChild(o),r.appendChild(a)}}else r.appendChild(o);void 0===e.other_ad&&(t.container=o)}else{switch(j.set_style(o,"position: fixed;overflow: hidden;"),o.style.maxWidth=t.w+"px",o.style.display="none",o.style.zIndex="999999999",t.pos_x){case"left":o.style.left="0";break;case"right":o.style.right="0";break;case"center":o.style.marginLeft=-(t.w/2)+"px",o.style.left="50%"}switch(t.pos_y){case"top":o.style.top="0";break;case"bottom":o.style.bottom="0";break;case"center":o.style.marginTop=-(t.h/2)+"px",o.style.top="50%"}void 0===e.other_ad&&(t.container=o),r.appendChild(o)}}catch(e){throw y.push({id:t.id,where:"positioner.floating_pos",e:e}),(0,f.default)(y,n,i),e}},check_pos:function(e){switch(C.check_obj(e,"positioner.check_pos"),e.format){case"header":this.header_pos(e);break;case"full":case"floating":case"full_video":this.floating_pos(e)}},get_top_scroll:function(e){return e.in_frame&&e.fif?top.pageYOffset||top.document.documentElement&&top.document.documentElement.scrollTop||top.document.body&&top.document.body.scrollTop:i.pageYOffset||n.documentElement&&n.documentElement.scrollTop||n.body&&n.body.scrollTop},get_left_scroll:function(e){return e.in_frame&&e.fif?top.pageXOffset||top.document.documentElement&&top.document.documentElement.scrollLeft||top.document.body&&top.document.body.scrollLeft:i.pageXOffset||n.documentElement&&n.documentElement.scrollLeft||n.body&&n.body.scrollLeft},check_scroll:function(e){C.check_obj(e,"positioner.check_scroll");var t=void 0;try{if(e.in_frame===!0?e.fif&&(t=_.default.get_top_size()):t=_.default.get_window_size(),null===t)return;var i=t.height+this.get_top_scroll(e),n=t.width+this.get_left_scroll(e);e.position=_.default.calculate_window_cont(e.pixel);var r=e.position.y+t.height>=i-t.height&&i>=e.position.y,o=n-t.width<=e.position.x+Number(e.w)&&n>=e.position.x;if(e.in_visible_area=o&&r,void 0!==b&&1==e.rotate){var a=e.position.y+t.height-Number(e.h)>=i-t.height&&i>=e.position.y+.75*Number(e.h),s=n-t.width<=e.position.x+.25*Number(e.w)&&n>=e.position.x+.75*Number(e.w);b.visible=s&&a}return!0}catch(t){return void y.push({id:e.id,where:"positioner.check_scroll",e:t})}},init:function(e){C.check_obj(e,"positioner.init"),this.is_fif(e);var t=this.is_in_frame(e);return t!==!0&&null!==t||"floating"!=e.format&&"full"!=e.format&&"full_video"!=e.format?(this.check_pos(e),!0):(console.log("Slider in iframe or we cant check iframe it or not"),!1)}},T={iframe:function e(t){C.check_obj(t,"creator.iframe");try{var e=n.createElement("iframe");n.all&&!i.atob?e.style.display="inline-block":e.style.display="none",e.frameBorder=0,e.style.width=t.w+"px",e.style.height=t.h+"px",e.width=t.w+"px",e.height=t.h+"px",e.id="btw_ad_"+t.id,e.scrolling="no","hb_partners"in t?e.name="btw_ad_"+t.id:e.src=t.banner_url,t.ads_block=e}catch(e){throw y.push({id:t.id,where:"creator.iframe",e:e}),(0,f.default)(y,n,i),e}},form:function e(t,r){C.check_obj(t,"creator.form");try{var o=t.banner_url,e=n.createElement("form");e.style.display="none",e.setAttribute("id","form_post_"+t.id),e.setAttribute("target","btw_ad_"+t.id),e.setAttribute("action",o),e.setAttribute("method","POST");var a=n.createElement("input");a.setAttribute("type","text"),a.setAttribute("name","header_bidding_payload"),a.setAttribute("value",JSON.stringify(r)),e.appendChild(a),t.formForPost=e,t.container.appendChild(t.formForPost),n.getElementById("form_post_"+t.id).submit()}catch(e){throw error.push({id:t.id,where:"creator.form",e:e}),(0,f.default)(y,n,i),e}},video:function e(t){C.check_obj(t,"creator.video");try{var e=n.createElement("video");e.style.display="none",e.style.width="100%",e.style.maxWidth=t.w+"px",e.setAttribute("muted",""),e.id="btw_video_"+t.id,e.setAttribute("hidden",""),e.style.background="#000",t.ads_block=e}catch(e){throw y.push({id:t.id,where:"creator.video",e:e}),(0,f.default)(y,n,i),e}},icon:function e(t){C.check_obj(t,"creator.icon");try{var r=n.createElement("a"),o="position: absolute; top: 1px; left: 1px; z-index: 99; display: block; width: 16px; height: 16px;";r.setAttribute("style",o),r.href=t.logo_domain+t.logo_params,r.setAttribute("target","_blank");var e=n.createElement("img"),o="display: block; width: 16px; height: 16px; border: 0";e.setAttribute("style",o),e.src=t.source+"/code/banner_icon.jpg",r.appendChild(e),t.logo_icon=r,t.container.appendChild(r)}catch(e){y.push({id:t.id,where:"creator.icon",e:e}),(0,f.default)(y,n,i)}},play_background:function(e){C.check_obj(e,"creator.play_background");try{var t=n.createElement("div");"full_video"==e.format?j.set_style(t,"width:100%;height:100%;position:absolute;top:50%;text-align:center;left:50%; transform: translate(-50%,-50%);z-index:9999999;-moz-border-radius:70px;-webkit-border-radius:70px;border-radius:70px;overflow:hidden;cursor:pointer;"):j.set_style(t,"width:70px;height:70px;position:absolute;top:1px;text-align:center;right:1px;z-index:9999999;-moz-border-radius:70px;-webkit-border-radius:70px;border-radius:70px;overflow:hidden;cursor:pointer;"),_.default.add_event(t,"click",function(i){e.ads_block.play().then(function(){e.container.contains(t)&&e.container.removeChild(t),O.attach_features(e,!0)},function(e){console.log("Произошла ошибка: "+e)})}),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")?n.getElementById("flex_btw_con").appendChild(t):e.container.appendChild(t),T.playButton_attached=!0}catch(t){throw y.push({id:e.id,where:"creator.play_background"}),t}},play_button:function(e){C.check_obj(e,"creator.play_button");try{var t=n.createElement("div"),i=n.createElement("img");i.src=e.source+"/code/play_button.png","full_video"==e.format?(j.set_style(i,"width:50px;height:50px;display: inline-block;margin-top:17px;"),j.set_style(t,"width:147px;position:absolute;top:50%;text-align:center;left:50%; transform: translate(-50%,-50%);z-index:9999999;-moz-border-radius:70px;-webkit-border-radius:70px;border-radius:70px;overflow:hidden;cursor:pointer;")):(j.set_style(i,"width:50px;height:50px;display: inline-block;"),j.set_style(t,"width:70px;height:70px;position:absolute;top:50%;text-align:center;left:50%;z-index:9999999; margin-left: -25px; margin-top: -25px;overflow:hidden;cursor:pointer;")),_.default.add_event(i,"click",function(i){e.ads_block.play().then(function(){e.container.contains(t)&&e.container.removeChild(t),O.attach_features(e,!0)},function(e){console.log("Произошла ошибка: "+e)})}),t.appendChild(i),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")||e.container.appendChild(t),T.playButton_attached=!0}catch(t){throw y.push({id:e.id,where:"creator.play_button"}),t}},reload_button:function(e){C.check_obj(e,"creator.reload_button");try{var t=n.createElement("div"),i=n.createElement("img");i.src="//cache.betweendigital.com/code/play.png",j.set_style(t,"background-color: rgba(66,66,66, 0.8);border-radius: 5px;position: absolute;top:50%;left: 50%; margin-left: -25px;margin-top:-25px;z-index: 999;"),j.set_style(i,"width: 50px; height: 50px;  cursor: pointer;border:0;padding:0;margin:0;background:transparent");var r=function t(){e.ads_block.currentTime=1e-6,i.removeEventListener("click",t,!1);for(var n in e.v)e.v[n].parentNode.removeChild(e.v[n]);e.reload_button_active=!1,O.video_init(e,1)};t.appendChild(i),e.container.appendChild(t),void 0===e.v&&(e.v={}),e.v.reload=t,e.reload_button_active=!0,_.default.add_event(i,"click",r,!1)}catch(t){throw y.push({id:e.id,where:"creator.reload_button"}),t}},logo_icon:function(e){C.check_obj(e,"creator.logo_icon");try{var t=n.createElement("a"),r=n.createElement("img");r.src=e.source+"/code/new_logo.png",t.href=e.logo_domain+e.logo_params,t.setAttribute("target","_blank"),"full_video"==e.format?i.innerHeight/i.innerWidth>1?(j.set_style(r,"width:100%;display: inline-block;"),j.set_style(t,"width:30%;position:absolute;bottom:0;text-align:center;left:0px;z-index:10;overflow:hidden;cursor:pointer;")):(j.set_style(r,"height:100%;display: inline-block;"),j.set_style(t,"height:10%;text-decoration: none;position:absolute;bottom:0;text-align:center;left:0px;z-index:10;overflow:hidden;cursor:pointer;")):"video"==e.type?(j.set_style(r,"height: inherit;display: block;border:0;background-color:#000;padding:0;margin:0;"),j.set_style(t,"text-decoration: none;display: block;padding:2px 5px;height: 26px;position:absolute;bottom:0;left:0;right:0;z-index:9;overflow:hidden;cursor:pointer;background-color: #000;")):(j.set_style(r,"width:140px;height:35px;display: inline-block;border:0;background-color:#000;padding:0;margin:0;margin-top:17px;"),j.set_style(t,"text-decoration: none;display: block;width:140px;height:70px;position:absolute;bottom:10px;left:5px;z-index:9999999;overflow:hidden;cursor:pointer;")),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")?n.getElementById("flex_btw_con").appendChild(t):e.container.appendChild(t),
void 0===e.v&&(e.v={}),e.v.icon=t}catch(t){throw y.push({id:e.id,where:"creator.logo_icon",e:t}),(0,f.default)(y,n,i),t}},playButton_attached:!1,close_button:function(e){C.check_obj(e,"creator.close_button");try{var t=n.createElement("div"),r=n.createElement("img");r.src=e.source+"/code/close_cr.png","full_video"==e.format||"video"==e.type?(j.set_style(t,"position: absolute; top: 0; right: 0;width: 40px; height: 40px; overflow: hidden; padding: 10px;cursor:pointer;"),j.set_style(r,"display: block; width: 100%; height: 100%;")):(j.set_style(r,"width:35px;height:35px;display: inline-block;margin-top:5px;margin-right:5px"),j.set_style(t,"width:65px;height:65px;position:absolute;top:1px;text-align:right;right:1px;z-index:2147483647;overflow:hidden;cursor:pointer;")),_.default.add_event(r,"click",function(t){O.clear(e.container)}),t.style.zIndex="2147483647",t.appendChild(r),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")?n.getElementById("flex_btw_con").appendChild(t):e.container.appendChild(t),void 0===e.v&&(e.v={}),e.v.close_button=t}catch(t){throw y.push({id:e.id,where:"creator.close_button",e:t}),(0,f.default)(y,n,i),t}},under_video_panel:function(e){C.check_obj(e,"creator.under_video_panel");try{var t=n.createElement("div");j.set_style(t,"position: relative;height: 30px; background-color: #000;"),e.video_panel=t,void 0===e.v&&(e.v={}),e.v.video_panel=t,"full_video"==e.format&&null!==n.getElementById("flex_btw_con")?n.getElementById("flex_btw_con").appendChild(e.video_panel):e.container.appendChild(e.video_panel)}catch(t){throw y.push({id:e.id,where:"creator.under_video_panel",e:t}),(0,f.default)(y,n,i),t}},mute_button:function(e){C.check_obj(e,"creator.mute_button");try{var t=n.createElement("div"),r=n.createElement("img");r.src=e.source+"/code/volume_muted_w.png",r.id="mute_"+e.id,j.set_style(t,"position: absolute; top: 0; bottom: 0; right: 0; margin: 0;padding:0;margin-top: 5px; width: 25px; padding-right: 5px;cursor:pointer"),j.set_style(r,"display: block; width: 100%; height: 100%;padding:0;margin:0;background:transparent;"),e.mute_button=r,void 0===e.v&&(e.v={}),e.v.mute=t,_.default.add_event(r,"click",function(t){O.toggle_sound(e.ads_block,r)}),t.appendChild(r),e.video_panel.appendChild(t)}catch(t){throw y.push({id:e.id,where:"creator.mute_button",e:t}),(0,f.default)(y,n,i),t}},bg:function e(){if(null===n.getElementById("btw_shadow_bg")){var e=n.createElement("div");e.style.display="block",e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.opacity="0.8",e.style.top="0",e.style.left="0",e.style.background="#000",e.id="btw_shadow_bg",n.body.appendChild(e)}},should_show:function(e){C.check_obj(e,"creator.should_show");var t,r=0,o=!1,a=e.timeout?e.timeout:1,s=Math.floor(Date.now()/1e3);try{return t=C.get_cookie("timedelay"),t?s-t>60*a&&(r=1,o=!0):(r="full_video"==e.format?0:1,o=!0),o&&(n.cookie="timedelay="+Math.floor(Date.now()/1e3)+"; path=/;"),1}catch(t){throw y.push({id:e.id,where:"creator.should_show",e:t}),(0,f.default)(y,n,i),t}},load:function(o){C.check_obj(o,"creator.load");var a;try{if(o.in_frame===!1&&r&&h===!1&&j.check_overflow(o),0==o.overflow||void 0===o.overflow){if(("out-stream"==o.format||"full_video"==o.format||"video"==o.type&&"floating"==o.format)&&this.video(o),("floating"==o.format||"full_video"==o.format)&&"mobile"==o.type||"full"==o.format)a=T.should_show(o),a?o.container.appendChild(o.ads_block):O.clear(o.container);else if(o.container.appendChild(o.ads_block),"hb_partners"in o)try{x.default.init(e,T.form)}catch(e){y.push({id:o.id,where:"start_script",e:e}),(0,f.default)(y,n,i)}("out-stream"==o.format||"full_video"==o.format&&a||"video"==o.type&&"floating"==o.format)&&O.load_video(o)}else t.blocked(e.container,e.id),t.btw(n,{id:e.id,type:"blocked"})}catch(e){throw y.push({id:o.id,where:"creator.load",e:e}),(0,f.default)(y,n,i),e}}},C={resize_banner:function(e){C.check_obj(e,"core.resize_banner"),C.check_sizes(e)===!1?e.container.style.display="none":void 0===e.closed&&(e.container.style.display="block")},check_sizes:function(e){return C.check_obj(e,"core.check_sizes"),screen.width>=e.w&&screen.height>=e.h},get_cookie:function(e){var t=n.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},check_obj:function(e,t){if(void 0===e||null===e)throw y.push({id:null,where:t,what:"we dont have section object|section="+(null===e?"null":"undefined"==typeof e?"undefined":o(e))}),new TypeError("in function `"+t+"` undefined `section` object")}},S={init:function(e,t){this.create_timer(e),this.set_timer(t)},create_timer:function(e){try{var t=n.createElement("div"),r=n.createElement("span");t.setAttribute("id","timer_container"),r.setAttribute("id","timer"),"full_video"==e.format?(j.set_style(r,"width:100%;display: inline-block;color:white;font-size:30px;"),j.set_style(t,"height:70px;width:70px;position:absolute;top:10px;text-align:center;right:10px;z-index:99999;overflow:hidden;cursor:pointer;")):(j.set_style(r,"display: inline-block;color:white;font-size:40px;line-height: 1.3em;"),j.set_style(t,"margin: 3px 3px 0 0;background-color: rgba(66,66,66,0.8);width:50px;height:50px;position:absolute;top:1px;text-align:center;right:1px;z-index:9999999;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;overflow:hidden;cursor:pointer;")),t.appendChild(r),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")?n.getElementById("flex_btw_con").appendChild(t):e.container.appendChild(t)}catch(t){throw y.push({id:e.id,where:"creator.timer",e:t}),(0,f.default)(y,n,i),t}},close_timer:function(){n.getElementById("timer_container").parentNode.removeChild(n.getElementById("timer_container")),T.close_button(e)},update_timer:function(e){n.getElementById("timer").innerHTML=e},set_timer:function(e){e=parseInt(e);var t=e+1,i=setInterval(function(){t-=1,t&&t>=1?S.update_timer(t):clearInterval(i)},1e3)}},I={_this:null,init:function(e){this._this=this,this.create_progress(e)},create_progress:function(e){try{var t=n.createElement("div");t.setAttribute("id","progressbar"),j.set_style(t,"position: relative;height:5px; width: 0%; background-color: yellow;"),void 0===e.v&&(e.v={}),e.v.progress=t,e.video_panel.appendChild(t)}catch(t){throw y.push({id:e.id,where:"creator.progressEl",e:t}),(0,f.default)(y,n,i),t}},update_progress:function(e,t){var i=n.getElementById("progressbar");if(null!==i){var r;e&&t?r=100*parseFloat(t)/parseFloat(e):(console.warn("update progress has no duration or current time in args"),r=0),i.style.width=r+"%"}}},O={show_banner:function(t){C.check_obj(t,"shower.show_banner"),t.ads_block.style.display="inline-block",m&&e.in_frame===!1&&1==t.rotate&&g.default.check_visibility&&(t.time_init=Date.now(),m=!1,void 0===b&&(b=new E.default),t.in_visible_area&&(b.visible=!0),b.init(function(){return j.check_scroll(t),b.visible},function(){O.update_banner()})),t.time_last=Date.now()},show_container:function(e){C.check_obj(e,"shower.show_container");var t=!0;"video"==e.type&&"floating"!=e.format&&(e.container.style.maxWidth=e.w+"px"),t&&(e.container.style.display="block")},update_banner:function(){h=!0,i.r_seq[e.id]++,v.default.init(e),e.icon&&e.logo_icon.parentNode.removeChild(e.logo_icon),"floating"!=e.format?(e.ads_block.parentNode.removeChild(e.ads_block),e.shown=!1,T.iframe(e)):(e.container.parentNode.removeChild(e.container),e.shown=!1,j.check_pos(e),T.iframe(e)),0==e.in_visible||1==e.in_visible_area?T.load(e):(j.check_scroll(e),1==e.in_visible_area&&0==e.shown&&(T.load(e),e.shown=!0))},attach_close_button:function(t){void 0!==e.show_close?S.init(t,e.show_close):T.close_button(e)},toggle_sound:function(t,i){var n=e.source+"/code/volume_w.png",r=e.source+"/code/volume_muted_w.png";t.muted?(i.src=n,t.volume=1,t.muted=!1,t.plane_up=0):(i.src=r,t.volume=0,t.muted=!0)},attach_features:function(e,t){return I.init(e),0==t?(O.clear(e.container),!1):(("full_video"==e.format||"video"==e.type&&"floating"==e.format)&&O.attach_close_button(e),e.ads_block.addEventListener("timeupdate",function(){0==this.currentTime&&(this.volume=0),I.update_progress(this.duration,this.currentTime)},!1),void 0===e.v.reload&&e.ads_block.addEventListener("ended",function(){this.currentTime=1e-6,T.reload_button(e)},!1),void(e.features_attached=!0))},play_video:function(e){e.injected=1,e.ads_block.load();var t=e.ads_block.play();e.ads_block.muted=!0,t?t.then(function(){e.features_attached||O.attach_features(e,!0)},function(t){null!==e.ads_block.error&&void 0!==e.ads_block.error.code&&O.clear(e.container),console.log(e.ads_block.error),console.log(t),0==T.playButton_attached&&O.attach_features(e,!1)}):O.attach_features(e,!0)},send_impressions:function(e){if(void 0!==e.vast_o.Impression){e.Impression=e.vast_o.Impression;for(var t=0;t<e.vast_o.Impression.length;t++){var i=new Image(1,1);i.src=e.vast_o.Impression[t]}}},generate_dom:function(e,t){for(var r=0;r<t.length;r++)if("SCRIPT"==t[r].nodeName)if(""!=t[r].src){var o=n.createElement("script");for(var a in t[r].attributes)if(t[r].attributes.hasOwnProperty(a)){var s=t[r].attributes[a].name;o[s]=t[r][s]}o.setAttribute("type","text/javascript"),null===t[r].parentNode.parentNode?e.container.appendChild(o):t[r].parentNode.appendChild(o)}else{if(null===t[r].parentNode.parentNode){e.container.appendChild(t[r]);var l=e.container.childNodes[e.container.childNodes.length-1]}else{t[r].parentNode.appendChild(t[r]);var l=t[r].parentNode.childNodes[t[r].parentNode.childNodes.length-1]}try{eval.call(i,l.innerHTML)}catch(e){console.log(e)}}else null===t[r].parentNode.parentNode?e.container.appendChild(t[r]):t[r].parentNode.appendChild(t[r])},show_video:function(r,o){try{T.under_video_panel(o),T.mute_button(o);var a=e.vastPlayer.errors();if(a.length>0){if(void 0!==o.adds&&void 0!==o.adds[o.id]&&void 0!==o.adds[o.id].video_fallback){o.container.style.display="block",o.ads_block.style.display="none",o.video_panel.style.display="none";var s=n.createElement("div");s.innerHTML=o.adds[o.id].video_fallback;var l=s.querySelectorAll("*");O.generate_dom(o,l),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else if(void 0!==o.video_fallback){o.container.style.display="block",o.ads_block.style.display="none",o.video_panel.style.display="none";var s=n.createElement("div");s.innerHTML=decodeURIComponent(o.video_fallback.replace(/\+/g," "));var l=s.querySelectorAll("*");O.generate_dom(o,l),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else t.error(e.container,e.id),t.btw(n,{id:e.id,type:"error"}),o.container.style.display="none";for(var c in a)console.log(a[c])}if(0===a.length){if(o.ads_block.style.display="block",O.show_container(e),"full_video"==e.format)T.bg(),console.log("show video"),O.play_video(o);else{if("floating"==o.format)return void O.play_video(o);var d=0;d=o.in_frame===!0&&o.fif?_.default.get_top_size():_.default.get_window_size();var u=d.height+j.get_top_scroll(o),h=(d.width+j.get_left_scroll(o),.4*o.ads_block.offsetHeight+o.position.y),p=.6*o.ads_block.offsetHeight+o.position.y;u>=h&&u-d.height<=p&&(o.features_attached?o.ads_block.play():O.play_video(o)),void 0===o.__scroll_watcher__&&(o.features_attached||O.attach_features(o,!0),_.default.add_event(i,"scroll",function(){o.position=_.default.calculate_window_cont(o.pixel);var e=.4*o.ads_block.offsetHeight+o.position.y,t=.6*o.ads_block.offsetHeight+o.position.y;o.__scroll_watcher__=!0;var i=d.height+j.get_top_scroll(o);d.width+j.get_left_scroll(o);i>=e&&i-d.height<=t?o.ads_block.paused&&o.ads_block.currentTime<o.ads_block.duration&&!o.reload_button_active&&o.ads_block.play():o.ads_block.paused||o.ads_block.pause()}))}t.success(e.container,e.id),t.btw(n,{id:e.id,type:"success"})}}catch(t){throw a.push({id:e.id,where:"shower.show_video",e:t}),(0,f.default)(a,n,i),t}},load_video:function(e){C.check_obj(e,"shower.load_video");try{e.shown=!0,O.video_init(e)}catch(t){throw y.push({id:e.id,where:"shower.load_video",e:t}),(0,f.default)(y,n,i),t}},video_init:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.features_attached=!1,t.vastPlayer=new u.default,t.vastPlayer.init({video_player_id:"btw_video_"+t.id,xml_url:("http:"===n.location.protocol?"http:":"https:")+t.video_url,timeout_in_frame:l,container:t.container,section_id:t.id,in_frame:t.in_frame,adds:t.adds,w:t.w,h:t.h,callback:function(i,r){if("VPAID2"!==i)if(e.vast_o=t.vastPlayer.xml(),t.ads_block.finished=!1,"mobile"==t.type){var o=function e(r){n.body.removeEventListener("click",e,!1),n.body.removeEventListener("touchstart",e,!1),n.body.removeEventListener("touchmove",e,!1),setTimeout(function(){void 0!==r&&r.preventDefault(),O.show_video(i,t)},1e3)};"video"==t.type&&"floating"==t.format||"full_video"==t.format?o():(n.body.addEventListener("touchstart",o,!1),n.body.addEventListener("touchmove",o,!1),n.body.addEventListener("click",o,!1))}else O.show_video(i,t);else void 0===r?e.fallback?_.default.build_virtual_dom(e.fallback).then(function(t){_.default.append_to_dom(e.container,t),_.default.hide_element(e.ads_block)}):_.default.hide_element(e.container):r.startAd()}})},clear:function(t){try{var r=n.getElementById("btw_shadow_bg");null!==r&&n.body.removeChild(r),"full_video"==e.format&&null!==n.getElementById("flex_btw_con")&&n.body.removeChild(n.getElementById("flex_btw_con")),t.style.display="none",t.innerHTML="",e.closed=!0}catch(t){throw y.push({id:e.id,where:"shower.clear",e:t}),(0,f.default)(y,n,i),t}}},A={validate:function(r,o){C.check_obj(o,"response.validate");try{if(r.origin!==o.banner_data.ads_url)return!1;if(null!==r.data&&r.data.provider&&"between"==r.data.provider&&r.data.section==o.id)if(void 0!==r.data.errors)void 0!==o.fallback?(1==o.c2s?(_.default.build_virtual_dom(o.fallback).then(function(e){_.default.append_to_dom(o.container,e),_.default.hide_element(o.ads_block)}),this.basic(o)):(o.ads_block.srcdoc=_.default.decode(o.fallback),this.basic(o)),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})):(t.noad(e.container,e.id),t.btw(n,{id:e.id,type:"noad"}),_.default.hide_element(o.container));else{switch(i.r_seq[e.id]>=10&&void 0!==b&&b.end(),r.data.line_item_type.toLowerCase()){case"fallback":case"noad":void 0!==b&&b.end()}void 0!==r.data.adomain&&"${adomain}"!==r.data.adomain&&(void 0!==o.adomains?o.adomains.push(r.data.adomain):o.adomains=[r.data.adomain]),"string"==typeof r.data.async_creative_html&&1==o.c2s?(t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"}),this.c2s(r,o)):r.data.is_show!==!1?(t.success(e.container,e.id),t.btw(n,{id:e.id,type:"success"}),this.basic(o)):(t.noad(e.container,e.id),t.btw(n,{id:e.id,type:"noad"}))}}catch(e){throw y.push({id:o.id,where:"response.validate",e:e}),(0,f.default)(y,n,i),e}},c2s:function(e,t){C.check_obj(t,"response.c2s");try{var r=n.createElement("div");r.innerHTML=decodeURIComponent(e.data.async_creative_html.replace(/\+/g," ")),null!==t.ads_block.parentNode&&void 0!==t.ads_block.parentNode&&t.ads_block.parentNode.removeChild(t.ads_block);for(var o=r.querySelectorAll("*"),a=0;a<o.length;a++)if("SCRIPT"==o[a].nodeName)if(""!=o[a].src){var s=n.createElement("script");for(var l in o[a].attributes)if(o[a].attributes.hasOwnProperty(l)){var c=o[a].attributes[l].name;s[c]=o[a][c]}s.setAttribute("type","text/javascript"),t.container.appendChild(s)}else{t.container.appendChild(o[a]);var d=t.container.childNodes[t.container.childNodes.length-1];try{eval.call(i,d.innerHTML)}catch(e){console.log(e)}}else t.container.appendChild(o[a]);O.show_container(t),t.container.style.background="transparent"}catch(e){throw y.push({id:t.id,where:"response.c2s",e:e}),(0,f.default)(y,n,i),e}},basic:function(e){C.check_obj(e,"response.basic");try{1==e.icon&&(T.icon(e),e.container.style.width=e.w+"px"),O.show_banner(e),"floating"!=e.format&&"full"!=e.format&&"full_video"!=e.format||(O.show_container(e),T.close_button(e))}catch(t){throw y.push({id:e.id,where:"response.basic",e:t}),(0,f.default)(y,n,i),t}}};if(w.init(e),p&&k.default.add("moat",e),!e.is_mobile&&("mobile"==e.type||"full_video"==e.format))return t.blocked(e.container,e.id),t.btw(n,{id:e.id,type:"blocked"}),!1;if(e.is_mobile&&"video"==e.type&&"mobile_inpage"!=e.format){if("out-stream"==e.format)if(void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].video_fallback){e.container.style.display="block";var N=n.createElement("div");N.innerHTML=e.adds[e.id].video_fallback;var L=N.querySelectorAll("*");O.generate_dom(e,L),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else if(void 0!==e.video_fallback){e.container.style.display="block";var N=n.createElement("div");N.innerHTML=decodeURIComponent(e.video_fallback.replace(/\+/g," "));var L=N.querySelectorAll("*");O.generate_dom(e,L),t.fallback(e.container,e.id),t.btw(n,{id:e.id,type:"fallback"})}else t.noad(e.container,e.id),t.btw(n,{id:e.id,type:"noad"}),e.container.style.display="none";return!1}return e.is_mobile||"mobile_inpage"!=e.format?j.init(e)!==!0?(t.blocked(e.container,e.id),t.btw(n,{id:e.id,type:"blocked"}),!1):void(e.in_frame?(_.default.add_event(i,"message",function(t){"si_our_add_code"==t.data.provider&&(e.msg=t.data)}),top&&top.postMessage({provider:"si_our_add_code",id:e.id},"*"),setTimeout(function(){a()},100)):a()):(t.blocked(e.container,e.id),t.btw(n,{id:e.id,type:"blocked"}),!1)}(window,document,i)})}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(25),s=n(a),l=i(3),c=n(l),d=i(16),u=n(d);i(11);var h=i(9),f=n(h),p=i(1),_=n(p),m=i(13),v=n(m),b=i(14),g=n(b),y=i(10),k=n(y),w=i(8),x=n(w),j=i(12),E=n(j),T=i(7),C=n(T),S=i(29),I=n(S);t.default=r},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){i(this,e)}return n(e,[{key:"create",value:function(e,t,i,n){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:n})}},{key:"emit",value:function(e,t,i){var n={id:e,type:i},r=this.create("success",n,!1,!0);t.dispatchEvent(r)}},{key:"success",value:function(e,t){this.emit(t,e,"success")}},{key:"error",value:function(e,t){this.emit(t,e,"error")}},{key:"blocked",value:function(e,t){this.emit(t,e,"blocked")}},{key:"noad",value:function(e,t){this.emit(t,e,"noad")}},{key:"fallback",value:function(e,t){this.emit(t,e,"fallback")}},{key:"btw",value:function(e,t){var i={id:t.id,type:t.type},n=this.create("btw",i,!1,!0);e.dispatchEvent(n)}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={bids:[],init:function(e,t){var i=this.makeParamsForRequests(e);this.getBidsFromPartnes(i,e,t)},makeParamsForRequests:function(e){if(0===e.hb_partners.length)return[];var t=[];return e.hb_partners.forEach(function(i){switch(i.name){case"MT":var n={name:"MT",creativeId:i.creativeId,url:"https://ad.mail.ru/hbid_yandex/",params:{places:[{id:i.id,placementId:i.placementId,sizes:[[e.w,e.h]]}],settings:{currency:"RUB",windowSize:{width:screen.width,height:screen.height}}}};t.push(n)}}),t},getBidsFromPartnes:function(e,t,i){var n=this;try{0!==e.length?!function(){var r=[],o=void 0,a=500;for(o=0;o<e.length;o++)!function(n,o){var s=o;r[n]=new XMLHttpRequest;var l=e[n].url,c=e[n].params;r[n].open("POST",l,!0),r[n].withCredentials=!0,r[n].timeout=a,r[n].start_request_time=new Date,r[n].name=e[n].name,r[n].onreadystatechange=function(){if(4===r[n].readyState){var o=new Date,l=o.getTime()-r[n].start_request_time.getTime();if(4===r[n].readyState&&200===r[n].status)switch(e[n].name){case"MT":var c=void 0;if(0!==JSON.parse(r[n].responseText).bids.length){var d=JSON.parse(r[n].responseText).bids.filter(function(e){return"cpm"in e&&"displayUrl"in e&&"currency"in e&&e.size.width===t.w&&e.size.height===t.h});if(d.length){c=d.reduce(function(e,t){return t.cpm>e.cpm?t:e},d[0]),delete c.id,delete c.size,c.creativeId=e[n].creativeId,c.cpm/=2;var u={partnerName:"MT",demand:c,responseTime:l,errorCode:null};s.concatBids(u,n===e.length-1,t,i);break}var h={partnerName:"MT",demand:null,responseTime:l,errorCode:"invalidJson"};s.concatBids(h,n===e.length-1,t,i);break}var f={partnerName:"MT",demand:null,responseTime:l,errorCode:null};s.concatBids(f,n===e.length-1,t,i)}else if(200!==r[n].status){var p={partnerName:r[n].name,demand:null,responseTime:l,errorCode:l>a?"timeoutError":"requestError"};s.concatBids(p,n===e.length-1,t,i)}}},r[n].ontimeout=function(o){var l={partnerName:r[n].name,demand:null,responseTime:a,errorCode:"timeoutError"};s.concatBids(l,n===e.length-1,t,i)},r[n].send(JSON.stringify(c))}(o,n)}():i(t,this.bids)}catch(e){throw e}},concatBids:function(e,t,i,n){this.bids.push(e),t&&n(i,this.bids)}}},function(e,t){"use strict";function i(e,t,i){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=n(r);t.default={add:function(e,t){this[e](t)},moat:function(e){var t="";t="video"===e.type&&("out-stream"===e.format||"floating"===e.format||"mobile_inpage"===e.format)||"mobile"===e.type&&"full_video"===e.format?void 0!==e.site_id?"moatClientLevel1=between_ssp_outstream&amp;moatClientLevel2="+o.default.get_domain()+"&amp;moatClientLevel3="+e.site_id+"&amp;moatClientLevel4="+e.id:"moatClientLevel1=between_ssp_outstream&amp;moatClientLevel2="+o.default.get_domain()+"&amp;moatClientLevel4="+e.id:void 0!==e.site_id?"moatClientLevel1=between_ssp_analitycs&amp;moatClientLevel2="+o.default.get_domain()+"&amp;moatClientLevel3="+e.site_id+"&amp;moatClientLevel4="+e.id:"moatClientLevel1=between_ssp_analitycs&amp;moatClientLevel2="+o.default.get_domain()+"&amp;moatClientLevel4="+e.id;var i="MOAT-betweenxdisplay301967117814?"+t,n="https://z.moatads.com/betweenxdisplay301967117814/moatad.js#"+t,r='<noscript class="'+i+'"></noscript><script src="'+n+'" type="text/javascript"></script>',a=1+1e3*Math.random();a=Math.floor(a),"video"===e.type&&("out-stream"===e.format||"floating"===e.format||"mobile_inpage"===e.format)||"mobile"===e.type&&"full_video"===e.format?a<=100&&o.default.build_virtual_dom(encodeURIComponent(r)).then(function(e){o.default.append_to_dom(document.body,e)}):a<=5&&o.default.build_virtual_dom(encodeURIComponent(r)).then(function(e){o.default.append_to_dom(document.body,e)})}}},function(e,t){"use strict";!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}()},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){var t=this;i(this,e),this.inited=!1,this.visible=!1,this.ended=!1,this.delay=0,this.start_point=0,this.counted=0,this.timer_id=0,this.callback="",this.checker="",window.addEventListener("blur",function(){t.ended===!1&&t.stop()}),window.addEventListener("focus",function(){t.visible&&t.ended===!1&&t.start()})}return n(e,[{key:"init",value:function(e,t){void 0!==e&&(this.checker=e),void 0!==t&&(this.callback=t);var i=25e3,n=9e4;this.delay=Math.floor(i+Math.random()*(n+1-i)),this.start(),this.inited=!0}},{key:"end",value:function(){clearInterval(this.timer_id),this.ended=!0}},{key:"start",value:function(){var e=this;this.ended===!1&&(this.delay=this.delay-this.counted,this.start_point=Date.now(),this.timer_id=setTimeout(function(){clearInterval(e.timer_id),e.counted=0,e.checker()?(e.init(),e.callback()):(e.init(e.checker,e.callback),e.stop())},this.delay))}},{key:"stop",value:function(){if(this.ended===!1){var e=Date.now();this.counted=e-this.start_point,clearInterval(this.timer_id),this.timer_id=0}}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i(1),a=n(o);t.default={build:function(e){var t=[];for(var i in e.banner_data.params)e.banner_data.params.hasOwnProperty(i)&&"pubdata"!==i&&"itu"!==i&&t.push(i+"="+e.banner_data.params[i]);if(e.banner_data.uri=t.join("&")+"&tagType=adi&w="+e.w+"&h="+e.h+"&s="+e.id,""!=e.banner_data.params.pubdata&&(e.banner_data.uri+="&"+e.banner_data.params.pubdata),""!=e.banner_data.params.itu&&(e.banner_data.uri+="&"+e.banner_data.params.itu),void 0!==e.video_url?(void 0!==e.banner_data.params.click3rd&&(e.video_url.indexOf("?")==-1?e.video_url+="?click3rd="+e.banner_data.params.click3rd:e.video_url+="&click3rd="+e.banner_data.params.click3rd),void 0!==e.banner_data.params.subid&&(e.video_url.indexOf("?")==-1?e.video_url+="?subid="+e.banner_data.params.subid:e.video_url+="&subid="+e.banner_data.params.subid),void 0!==e.banner_data.params.bidFloor&&(e.video_url.indexOf("?")==-1?e.video_url+="?bidFloor="+e.banner_data.params.bidFloor:e.video_url+="&bidFloor="+e.banner_data.params.bidFloor),""!=e.banner_data.params.pubdata&&(e.video_url.indexOf("?")==-1?e.video_url+="?"+e.banner_data.params.pubdata:e.video_url+="&"+e.banner_data.params.pubdata),""!=e.banner_data.params.itu&&((e.banner_data.params.itu.indexOf("?")>-1||e.banner_data.params.itu.indexOf("&")>-1||e.banner_data.params.itu.indexOf("/")>-1)&&(e.banner_data.params.itu=encodeURIComponent(e.banner_data.params.itu)),e.video_url.indexOf("?")==-1?e.video_url+="?"+e.banner_data.params.itu:e.video_url+="&"+e.banner_data.params.itu),e.video_url.indexOf("?")==-1?e.video_url+="?jst=v":e.video_url+="&jst=v"):e.banner_data.uri+="&jst=ai",void 0!==e.adomains)for(var n=0;n<e.adomains.length;n++)"EMPTY"!==e.adomains[n]&&(e.banner_data.uri+="&badv="+e.adomains[n]);void 0!==e.time_init&&(e.banner_data.uri+="&t_init="+Math.ceil((Date.now()-e.time_init)/1e3)),void 0!==e.time_last&&(e.banner_data.uri+="&t_last="+Math.ceil((Date.now()-e.time_last)/1e3)),e.banner_url=e.banner_data.ads_url+"/adi?"+e.banner_data.uri},get_fv:function(e){void 0!==e.file_version&&(e.banner_data.params.fv=e.file_version)},get_itu:function(e){void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].itu?((e.adds[e.id].itu.indexOf("?")>-1||e.adds[e.id].itu.indexOf("&")>-1||e.adds[e.id].itu.indexOf("/")>-1)&&(e.adds[e.id].itu=encodeURIComponent(e.adds[e.id].itu)),e.banner_data.params.itu="itu="+encodeURIComponent(e.adds[e.id].itu)):e.banner_data.params.itu=""},get_pubdata:function(e){var t="";if(void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].pubdata){var i=0;for(var n in e.adds[e.id].pubdata)0==i?(t=t+encodeURIComponent("pubside_macro["+n+"]")+"="+encodeURIComponent(e.adds[e.id].pubdata[n]),i++):t=t+"&"+encodeURIComponent("pubside_macro["+n+"]")+"="+encodeURIComponent(e.adds[e.id].pubdata[n])}""!=t?e.banner_data.params.pubdata=t:e.banner_data.params.pubdata=""},get_subid:function(e){void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].subid&&(e.banner_data.params.subid=e.adds[e.id].subid)},get_bidFloor:function(e){void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].bidFloor&&(e.banner_data.params.bidFloor=e.adds[e.id].bidFloor)},get_click3rd:function(e){void 0!==e.adds&&void 0!==e.adds[e.id]&&void 0!==e.adds[e.id].click3rd&&((e.adds[e.id].click3rd.indexOf("?")>-1||e.adds[e.id].click3rd.indexOf("&")>-1||e.adds[e.id].click3rd.indexOf("/")>-1)&&(e.adds[e.id].click3rd=encodeURIComponent(e.adds[e.id].click3rd)),e.banner_data.params.click3rd=e.adds[e.id].click3rd)},get_eeni:function(e){window.location.origin==e.banner_data.params.ads_url&&(e.banner_data.params.enforce_eeni=1)},get_rr:function(e){if(void 0===e.msg){try{var t=top.document,i=t.referrer}catch(e){}"undefined"!=typeof i&&i.length>0?e.banner_data.params.rr=encodeURIComponent(i):"undefined"!=typeof i&&""==i&&(e.banner_data.params.rr="direct")}else e.banner_data.params.rr=e.msg.rr},get_ord:function(e){e.banner_data.params.ord=1e16*Math.random()},get_frl:function(e){for(var t=0,i=window;window.top!=i.window;){t++;try{i=i.parent}catch(e){i=null}if(t>=20)break;if(null===i){t=void 0;break}}e.banner_data.params.frl=t},get_fl:function(e){if(void 0!==navigator.plugins&&null!==navigator.plugins&&void 0!==navigator.plugins["Shockwave Flash"]&&null!==navigator.plugins["Shockwave Flash"]&&"object"===r(navigator.plugins["Shockwave Flash"])){var t=navigator.plugins["Shockwave Flash"].description;if(t&&(void 0===navigator.mimeTypes||!navigator.mimeTypes["application/x-shockwave-flash"]||navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin))return t=t.replace(/^.*\s+(\S+\s+\S+$)/,"$1").replace(/^(.*)\..*$/,"$1"),e.banner_data.params.fl=parseInt(t,10),!1}if(void 0!==window.ActiveXObject)try{var i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i){var n=i.GetVariable("$version");if(n)return n=n.split(" ")[1].split(","),e.banner_data.params.fl=parseInt(n[0],10),!1}}catch(e){}return e.banner_data.params.fl=0,!1},get_tz:function(e){e.banner_data.params.tz=(new Date).getTimezoneOffset()},get_ref:function(e){if(void 0===e.msg){var t="";try{t=top.location.href}catch(e){t=""}e.in_frame?""!=t?e.banner_data.params.ref=encodeURIComponent(t):1==e.banner_data.params.frl?e.banner_data.params.ref=encodeURIComponent(window.document.referrer):e.banner_data.params.ref=encodeURIComponent(window.location.href):delete e.banner_data.params.ref}else e.banner_data.params.ref=e.msg.ref},get_pos:function(e){var t=e.pixel;if(e.in_frame===!1)e.position=a.default.calculate_window_cont(t);else if(e.fif){for(var i=self;i!=top;)t=i.frameElement,i=i.parent;e.position=a.default.calculate_window_cont(t)}else e.position=a.default.calculate_window_cont(t);if(void 0===e.msg){if(e.in_visible&&e.in_frame===!1||"floating"==e.format||"full"==e.format||"full_video"==e.format||"header"==e.format)return e.banner_data.params.pos="atf",!1;if(e.in_visible&&e.in_frame&&e.fif)return e.banner_data.params.pos="atf",!1;var n={};if(e.in_frame===!0){if(!e.fif)return!1;n=a.default.get_top_size()}else n=a.default.get_window_size();null!==n&&n.height>0&&n.width>0&&(e.position.x<n.width&&e.position.y<n.height?e.banner_data.params.pos="atf":e.banner_data.params.pos="btf")}else e.banner_data.params.pos=e.msg.pos},get_c2s:function(e){1==e.c2s&&(e.banner_data.params.c2s=1)},get_foc:function(e){void 0===e.msg?window==window.top&&("visible"==document.visibilityState?e.banner_data.params.foc=1:e.banner_data.params.foc=0):e.banner_data.params.foc=e.msg.foc},get_r_seq:function(e){void 0===window.r_seq&&(window.r_seq={}),void 0===window.r_seq[e.id]?(window.r_seq[e.id]=0,e.banner_data.params.r_seq=0):e.banner_data.params.r_seq=window.r_seq[e.id]},init:function(e){e.banner_data.params={},this.get_fv(e),this.get_frl(e),this.get_subid(e),this.get_bidFloor(e),this.get_click3rd(e),this.get_pos(e),this.get_ref(e),this.get_tz(e),this.get_fl(e),this.get_ord(e),this.get_pubdata(e),this.get_eeni(e),this.get_itu(e),this.get_rr(e),this.get_c2s(e),this.get_foc(e),this.get_r_seq(e),this.build(e)}}},function(e,t){"use strict";function i(e){for(var t=!0;e;){if("hidden"===e.style.visibility){t=!1;break}e=e.offsetParent}return t}function n(e){i(e)}Object.defineProperty(t,"__esModule",{
value:!0}),t.default={check_all:n,check_visibility:i}},,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){this.errors=[],this.clickthrough_tracking=[],this.volume_timer,this.callback,this.isValid=function(){return this.media_file||this.errors.push("no suitable media_file found"),this.duration||this.errors.push("no duration"),0==this.errors.length},this.sendError=function(e){switch(void 0!=e&&null!=e&&0!=e||(e=900),e){case 100:this.errors.push("XML parsing error");break;case 101:this.errors.push("VAST schema validation error");break;case 102:this.errors.push("VAST version of response not supported.");break;case 103:this.errors.push("VAST doesn`t have creative.");break;case 104:this.errors.push("Media file doesn`t have duration.");break;case 105:this.errors.push("VAST doesn`t have media files.");break;case 200:this.errors.push("Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display.");break;case 201:this.errors.push("Video player expecting different linearity.");break;case 202:this.errors.push("Video player expecting different duration.");break;case 203:this.errors.push("Video player expecting different size.");break;case 300:this.errors.push("General Wrapper error.");break;case 301:this.errors.push("Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by video player.)");break;case 302:this.errors.push("Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response.");break;case 303:this.errors.push("No Ads VAST response after one or more Wrappers.");break;case 400:this.errors.push("General Linear error. Video player is unable to display the Linear Ad.");break;case 401:this.errors.push("File not found. Unable to find Linear/MediaFile from URI.");break;case 402:this.errors.push("Timeout of MediaFile URI.");break;case 500:this.errors.push("Can`t load VASTAdTagURI");break;case 900:this.errors.push("Undefined Error.");break;case 901:this.errors.push("General VPAID error.");break;default:this.errors.push("Undefined Error.")}if(null!=this.Error)for(var t=0;t<this.Error.length;t++){var i=this.Error[t];if(i){i=i.replace("[ERRORCODE]",e);var n=new Image(1,1);n.src=i}}},this.clone=function(){return e(this)};var e=function(t){var i;if(null==t||"object"!=("undefined"==typeof t?"undefined":a(t)))return t;if(t instanceof Date)return i=new Date,i.setTime(t.getTime()),i;if(t instanceof Array){i=[];for(var n=0,r=t.length;n<r;n++)i[n]=e(t[n]);return i}if(t instanceof Object){i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=e(t[o]));return i}throw new Error("Unable to copy obj! Its type isn't supported.")}.bind(this)}function o(){var e,t=function(e){var t=new Image(1,1);t.src=e},i=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},n=function(e){for(var t=0;t<e.childNodes.length;t++)if(4==e.childNodes[t].nodeType)return e.childNodes[t].nodeValue.trim();if(e.childNodes.length>0)return e.childNodes[0].nodeValue.trim()}.bind(this),o=function(e){for(var t=0;t<e.length;t++)"start"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_start?this.xml_object.tracking_start+=" "+n(e[t]):this.xml_object.tracking_start=n(e[t]),this.xml_object.tracking_start_tracked=!1),"firstQuartile"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_first_quartile?this.xml_object.tracking_first_quartile+=" "+n(e[t]):this.xml_object.tracking_first_quartile=n(e[t]),this.xml_object.tracking_first_quartile_tracked=!1),"midpoint"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_midpoint?this.xml_object.tracking_midpoint+=" "+n(e[t]):this.xml_object.tracking_midpoint=n(e[t]),this.xml_object.tracking_midpoint_tracked=!1),"thirdQuartile"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_third_quartile?this.xml_object.tracking_third_quartile+=" "+n(e[t]):this.xml_object.tracking_third_quartile=n(e[t]),this.xml_object.tracking_third_quartile_tracked=!1),"complete"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_complete?this.xml_object.tracking_complete+=" "+n(e[t]):this.xml_object.tracking_complete=n(e[t]),this.xml_object.tracking_complete_tracked=!1),"close"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_close?this.xml_object.tracking_close+=" "+n(e[t]):this.xml_object.tracking_close=n(e[t]),this.xml_object.tracking_close_tracked=!1),"skip"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_skip?this.xml_object.tracking_skip+=" "+n(e[t]):this.xml_object.tracking_skip=n(e[t]),this.xml_object.tracking_skip_tracked=!1),"creativeView"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_creativeViewe?this.xml_object.tracking_creativeView+=" "+n(e[t]):this.xml_object.tracking_creativeView=n(e[t]),this.xml_object.tracking_creativeView_tracked=!1),"mute"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_mute?this.xml_object.tracking_mute+=" "+n(e[t]):this.xml_object.tracking_mute=n(e[t]),this.xml_object.tracking_mute_tracked=!1),"unmute"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_unmute?this.xml_object.tracking_unmute+=" "+n(e[t]):this.xml_object.tracking_unmute=n(e[t]),this.xml_object.tracking_unmute_tracked=!1),"pause"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_pause?this.xml_object.tracking_pause+=" "+n(e[t]):this.xml_object.tracking_pause=n(e[t]),this.xml_object.tracking_pause_tracked=!1),"resume"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_resume?this.xml_object.tracking_resume+=" "+n(e[t]):this.xml_object.tracking_resume=n(e[t]),this.xml_object.tracking_resume_tracked=!1),"fullscreen"==e[t].getAttribute("event")&&(null!=this.xml_object.tracking_fullscreen?this.xml_object.tracking_fullscreen+=" "+n(e[t]):this.xml_object.tracking_fullscreen=n(e[t]),this.xml_object.tracking_fullscreen_tracked=!1)}.bind(this),a=function(e,t){for(var i=e.getElementsByTagName(t),r=0;r<i.length;r++)if(i.length>0){var o=n(i[r]);void 0!==o&&(t in this.xml_object?this.xml_object[t].push(o):(this.xml_object[t]=[],this.xml_object[t].push(o)))}}.bind(this),s=function(e,t){if(null!==this.video_player&&void 0!==this.video_player){this.video_player.remove(),delete this.video_player;var i=document.createElement("video");i.style.width="100%",i.style.height="100%",document&&document.body&&document.body.getElementsByTagName("video")?i.id="btw_"+document.body.getElementsByTagName("video").length:i.id="btw_video",this.video_player=i,this.obj.container.style.height=t||this.obj.h,this.obj.container.style.width=e||this.obj.w,this.obj.container.appendChild(this.video_player)}}.bind(this),c=function(){var t=this;clearInterval(this.volume_timer),this.volume_timer=setInterval(function(){var i=Number(e.getAdVolume());return void 0!==i&&null!==i&&!isNaN(i)&&void(1===i?(clearInterval(t.volume_timer),t.volume_timer=void 0):(console.log(i,i+.1,Number(i+.1).toFixed(1)),e.setAdVolume(Number(i+.1).toFixed(1))))},200)}.bind(this),d=function(){var t=this;clearInterval(this.volume_timer),this.volume_timer=setInterval(function(){var i=Number(e.getAdVolume());return void 0!==i&&null!==i&&!isNaN(i)&&void(0===i?(clearInterval(t.volume_timer),t.volume_timer=void 0):(console.log(i,i-.1,Number(i-.1).toFixed(1)),e.setAdVolume(Number(i-.1).toFixed(1))))},75)}.bind(this),u=function(){this.obj.container.addEventListener("mouseenter",c),this.obj.container.addEventListener("mouseleave",d)}.bind(this),h=function(){e.subscribe(function(){var t=this;e.setAdVolume(0),e.adVolume=0,u(),l.default.check_scroll(this.obj.container)?this.callback("VPAID2",e):l.default.listen_scroll(this.obj.container,function(){t.callback("VPAID2",e)})}.bind(this),"AdLoaded"),e.subscribe(function(){if(this.obj.container.style.display="block",void 0!==this.xml_object.tracking_creativeView&&this.xml_object.tracking_creativeView_tracked===!1){for(var e=this.xml_object.tracking_creativeView.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_creativeView",this.xml_object.tracking_creativeView),this.xml_object.tracking_creativeView_tracked=!0}}.bind(this),"AdStarted"),e.subscribe(function(){if(this.obj.container.style.display="none",void 0!==this.xml_object.tracking_close&&this.xml_object.tracking_close_tracked===!1){for(var e=this.xml_object.tracking_close.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_close",this.xml_object.tracking_close),this.xml_object.tracking_close_tracked=!0}}.bind(this),"AdStopped"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_pause){for(var e=this.xml_object.tracking_pause.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_pause",this.xml_object.tracking_pause)}}.bind(this),"AdPaused"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_resume){for(var e=this.xml_object.tracking_resume.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_resume",this.xml_object.tracking_resume)}}.bind(this),"AdPlaying"),e.subscribe(function(){if(this.obj.container.style.display="none",void 0!==this.xml_object.tracking_skip&&this.xml_object.tracking_skip_tracked===!1){for(var e=this.xml_object.tracking_skip.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_skip",this.xml_object.tracking_skip),this.xml_object.tracking_skip_tracked=!0}}.bind(this),"AdSkipped"),e.subscribe(function(){if(this.xml_object.Impression&&this.xml_object.Impression.length>0)for(var e=0;e<this.xml_object.Impression.length;e++)t(this.xml_object.Impression[e]),console.log("impression",this.xml_object.Impression[e])}.bind(this),"AdImpression"),e.subscribe(function(i){var n=e.getAdVolume();if(0==n&&void 0!==this.xml_object.tracking_mute){for(var r=this.xml_object.tracking_mute.split(" "),o=0;o<r.length;o++)t(r[o]);console.log("mute",this.xml_object.tracking_mute)}if(n>0&&void 0!==this.xml_object.tracking_unmute){for(var r=this.xml_object.tracking_unmute.split(" "),o=0;o<r.length;o++)t(r[o]);console.log("unmute",this.xml_object.tracking_unmute)}}.bind(this),"AdVolumeChange"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_start&&this.xml_object.tracking_start_tracked===!1){for(var e=this.xml_object.tracking_start.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_start",this.xml_object.tracking_start),this.xml_object.tracking_start_tracked=!0}}.bind(this),"AdVideoStart"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_first_quartile&&this.xml_object.tracking_first_quartile_tracked===!1){for(var e=this.xml_object.tracking_first_quartile.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_first_quartile",this.xml_object.tracking_first_quartile),this.xml_object.tracking_first_quartile_tracked=!0}}.bind(this),"AdVideoFirstQuartile"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_midpoint&&this.xml_object.tracking_midpoint_tracked===!1){for(var e=this.xml_object.tracking_midpoint.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_midpoint",this.xml_object.tracking_midpoint),this.xml_object.tracking_midpoint_tracked=!0}}.bind(this),"AdVideoMidpoint"),e.subscribe(function(){if(void 0!==this.xml_object.tracking_third_quartile&&this.xml_object.tracking_third_quartile_tracked===!1){for(var e=this.xml_object.tracking_third_quartile.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_third_quartile",this.xml_object.tracking_third_quartile),this.xml_object.tracking_third_quartile_tracked=!0}}.bind(this),"AdVideoThirdQuartile"),e.subscribe(function(){if(this.obj.container.style.display="none",void 0!==this.xml_object.tracking_complete&&this.xml_object.tracking_complete_tracked===!1){for(var e=this.xml_object.tracking_complete.split(" "),i=0;i<e.length;i++)t(e[i]);console.log("tracking_complete",this.xml_object.tracking_complete),this.xml_object.tracking_complete_tracked=!0}}.bind(this),"AdVideoComplete"),e.subscribe(function(){if(void 0!==this.xml_object.clickthrough_tracking)for(var e=0;e<this.xml_object.clickthrough_tracking.length;e++)t(this.xml_object.clickthrough_tracking[e]),console.log("clickthrough_tracking",this.xml_object.clickthrough_tracking[e])}.bind(this),"AdClickThru"),e.subscribe(function(e){if(this.callback("VPAID2"),void 0!==this.xml_object.Error)for(var i=0;i<this.xml_object.Error.length;i++)t(this.xml_object.Error[i]),console.log("Error",this.xml_object.Error[i]);throw e}.bind(this),"AdError")}.bind(this),f=function(t,i){h(),s(t,i);var n=void 0!==this.xml_object.AdParameters&&void 0!==this.xml_object.AdParameters[0]&&this.xml_object.AdParameters[0],r={};n!==!1&&(r.AdParameters=n),e.initAd(this.media_params.w,this.media_params.h,"normal",this.media_params.bit,r,{videoSlot:this.video_player,videoSlotCanAutoPlay:!0,slot:this.obj.container})}.bind(this),p=function(t,i){if(0==t.length)return this.xml_object.sendError(100),this.callback(this),null;for(var r=0;r<t.length;r++){var o=t[r],s=o.getAttribute("type");if("application/javascript"===s){var l=document.createElement("iframe");l.id="adloaderframe",l.src="about:self",l.onload=function(t){var n=l.contentWindow.getVPAIDAd;n&&"function"==typeof n&&(e=n(),a(i,"AdParameters"),this.media_params={w:this.obj.w,h:this.obj.h,bit:o.getAttribute("bitrate")||256},f(this.media_params.w,this.media_params.h))}.bind(this),l.srcdoc='<script src="'+n(o)+'"></script>',document.body.appendChild(l),l.width="0px",l.height="0px",l.style.border="0px"}}}.bind(this),_=function(e,t){for(var i=!0,r=!1,o=0;o<this.media_type.length;o++){var a=this.media_type[o];if(0==e.length)return this.xml_object.sendError(100),this.callback(this),null;for(var s,l,c=0;c<e.length;c++){var d=e[c],u=d.getAttribute("type");if(u==a){var h=parseInt(d.getAttribute("width"));s?l>Math.abs(this.video_player.offsetWidth-h)&&(s=d,l=Math.abs(this.video_player.offsetWidth-h)):(s=d,l=Math.abs(this.video_player.offsetWidth-parseInt(s.getAttribute("width"))))}else"application/javascript"===u&&i&&(i=!1,r=!0,p(e,t))}s&&r===!1&&(this.xml_object.media_file=n(s),this.xml_object.media_file_width=parseInt(s.getAttribute("width")))}}.bind(this),m=function(e,t){if(e.getElementsByTagName("Creatives").length>0)for(var i=e.getElementsByTagName("Creative"),r=0;r<i.length;r++){var a=i[r].getElementsByTagName("Linear");if(a.length>0)for(var s=0;s<a.length;s++){var l=a[s].getElementsByTagName("MediaFiles");a[s].getElementsByTagName("AdParameters");if(l.length>0)if(t){var c=l[0].getElementsByTagName("MediaFile");c.length>0&&_(c,a[s])}else this.xml_object.sendError(101);else t&&this.xml_object.sendError(105);if(t){var d=a[s].getElementsByTagName("Duration");if(!(d.length>0))return this.xml_object.sendError(104),this.callback(this),null;this.xml_object.duration=d[0].childNodes[0].nodeValue;var u=this.xml_object.duration.split(":");this.xml_object.duration=60*+u[0]*60+60*+u[1]+ +u[2]}var h=a[s].getElementsByTagName("VideoClicks");if(h.length>0){var f=h[0].getElementsByTagName("ClickThrough"),p=h[0].getElementsByTagName("ClickTracking");f.length>0&&(this.xml_object.clickthrough_url=n(f[0]));for(var m=0;m<p.length;m++)this.xml_object.clickthrough_tracking.push(n(p[m]))}var v=a[s].getElementsByTagName("TrackingEvents");if(v.length>0){var b=v[0].getElementsByTagName("Tracking");b.length>0&&o(b)}}}}.bind(this),v=function(e){a(e,"Impression"),a(e,"Error"),m(e,!1);var t=n(e.getElementsByTagName("VASTAdTagURI")[0]);g(t).then(null,function(){this.xml_object.sendError(500),this.callback(this)}.bind(this))}.bind(this),b=function(e){var i=this;if(a(e,"Impression"),a(e,"Error"),m(e,!0),this.xml_object.isValid()){if(null===document.getElementById("h5vwrapper_"+this.video_player.id)){var n=document.createElement("div");n.className="h5vwrapper",n.style.position="relative",n.style.zIndex=8,n.id="h5vwrapper_"+this.video_player.id,this.video_player.parentNode.insertBefore(n,this.video_player),n.appendChild(this.video_player)}else var n=document.getElementById("h5vwrapper_"+this.video_player.id);this.player_max_width>0&&(n.style.maxWidth=this.player_max_width+"px",this.video_player.style.maxWidth=this.player_max_width+"px"),this.player_max_height>0&&(n.style.maxHeight=this.player_max_height+"px",this.video_player.style.maxHeight=this.player_max_height+"px"),w(),this.video_player.addEventListener("pause",function(){if(null!=this.xml_object.tracking_pause&&!this.video_player.ended)for(var e=this.xml_object.tracking_pause.split(" "),i=0;i<e.length;i++)t(e[i])}.bind(this),!0),this.video_player.addEventListener("play",function(){if(this.start_inited){if(null!=this.xml_object.tracking_resume)for(var e=this.xml_object.tracking_resume.split(" "),i=0;i<e.length;i++)t(e[i])}else{if(this.in_frame===!1){if(null!=this.xml_object.Impression)for(var n=0;n<this.xml_object.Impression.length;n++)t(this.xml_object.Impression[n]);if(null!=this.xml_object.tracking_start)for(var e=this.xml_object.tracking_start.split(" "),i=0;i<e.length;i++)t(e[i])}else setTimeout(function(){if(null!=this.xml_object.Impression)for(var e=0;e<this.xml_object.Impression.length;e++)t(this.xml_object.Impression[e]);if(null!=this.xml_object.tracking_start)for(var i=this.xml_object.tracking_start.split(" "),n=0;n<i.length;n++)t(i[n])}.bind(this),1e3*this.timeout_in_frame);this.xml_object.tracking_start_tracked=!0,this.start_inited=!0}}.bind(this),!0),window.addEventListener("resize",function(){}),window.addEventListener("scroll",function(){}),window.addEventListener("load",function(){}),window.addEventListener("DOMContentLoaded",function(){}),this.video_player.removeAttribute("hidden"),l.default.check_scroll(this.obj.container)?this.callback(this):l.default.listen_scroll(this.obj.container,function(){i.callback(i)})}}.bind(this),g=function(e){return new Promise(function(t,i){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.withCredentials=!0,n.open("GET",e,!0),n.send(),n.onreadystatechange=function(){4==n.readyState&&(200==n.status&&(k(n.responseXML),t()),302==n.status&&t(),i())}.bind(this)})}.bind(this),y=function(){if(this.urls){if(void 0==this.i)this.i=0,this.j=0;else if(this.j>=this.urls[this.priorities[this.i]].length&&(this.j=0,this.i+=1),this.i>=this.priorities.length)return;this.xml_object=this.clone_obj_vast.clone(),g(this.urls[this.priorities[this.i]][this.j++]).then(function(e){this.xml_object.isValid()||y()}.bind(this))}}.bind(this),k=function(e){if(!e)return this.xml_object.sendError(301),void this.callback(this);if(1!=e.getElementsByTagName("VAST").length)return this.xml_object.sendError(101),void this.callback(this);if(1!=e.getElementsByTagName("Ad").length)return this.xml_object.sendError(103),void this.callback(this);var t=e.getElementsByTagName("Wrapper").length>0,i=e.getElementsByTagName("InLine").length>0;return t&&i||!t&&!i?(this.xml_object.sendError(101),void this.callback(this)):void(t&&!i?v(e):b(e))}.bind(this),w=function(){this.video_player.src=this.xml_object.media_file,this.video_player.load();var e=function(t){if(this.video_player.removeAttribute("controls"),i()){var n=function(e){x(),this.video_player.removeEventListener("click",n)}.bind(this);this.video_player.addEventListener("click",n)}else x();this.video_player.volume=0,this.video_player.currentTime=this.startTime,this.video_player.wasInit=!0,this.video_player.removeEventListener("loadedmetadata",e)}.bind(this),n=function(e){this.video_player.finished=!0,this.video_player.removeEventListener("ended",n)}.bind(this),r=function(e){var i=(new Image,Math.floor(this.video_player.currentTime));if(i==this.startTime&&0==this.xml_object.tracking_start_tracked&&(this.video_player.oneStartSkipped||(this.video_player.oneStartSkipped=!0)),i==Math.floor(this.xml_object.duration/4)&&0==this.xml_object.tracking_first_quartile_tracked){if(null!=this.xml_object.tracking_first_quartile)for(var n=this.xml_object.tracking_first_quartile.split(" "),o=0;o<n.length;o++)t(n[o]);this.xml_object.tracking_first_quartile_tracked=!0}if(i==Math.floor(this.xml_object.duration/2)&&0==this.xml_object.tracking_midpoint_tracked){if(null!=this.xml_object.tracking_midpoint)for(var n=this.xml_object.tracking_midpoint.split(" "),o=0;o<n.length;o++)t(n[o]);this.xml_object.tracking_midpoint_tracked=!0}if(i==Math.floor(this.xml_object.duration/2)+Math.floor(this.xml_object.duration/4)&&0==this.xml_object.tracking_third_quartile_tracked){if(null!=this.xml_object.tracking_third_quartile)for(var n=this.xml_object.tracking_third_quartile.split(" "),o=0;o<n.length;o++)t(n[o]);this.xml_object.tracking_third_quartile_tracked=!0}if(i>=this.xml_object.duration-1){if(0==this.xml_object.tracking_complete_tracked){if(null!=this.xml_object.tracking_complete)for(var n=this.xml_object.tracking_complete.split(" "),o=0;o<n.length;o++)t(n[o]);this.xml_object.tracking_complete_tracked=!0}this.video_player.removeEventListener("timeupdate",r)}}.bind(this);this.video_player.addEventListener("loadedmetadata",e),this.video_player.addEventListener("ended",n),this.video_player.addEventListener("timeupdate",r)}.bind(this),x=function(){var e=document.getElementById("h5vwrapper_"+this.video_player.id);if(null===document.getElementById("h5vclickt_"+this.video_player.id)){var i=document.createElement("div");i.className="h5vclickt",i.id="h5vclickt_"+this.video_player.id,i.style.position="absolute",i.style.cursor="pointer",i.style.left=0,i.style.top=0,i.style.width="100%",i.style.height="100%",i.style.zIndex="9999",e.appendChild(i);var n=document.getElementById("h5vclickt_"+this.video_player.id);n.onclick=function(){if(window.open(this.xml_object.clickthrough_url),null!=this.xml_object.clickthrough_tracking)for(var e=0;e<this.xml_object.clickthrough_tracking.length;e++)t(this.xml_object.clickthrough_tracking[e])}.bind(this),n.addEventListener("mouseenter",function(){j()}),n.addEventListener("mouseleave",function(){E(0)})}}.bind(this),j=function(){this.video_player.finished||(this.video_player.timerDown&&clearTimeout(this.video_player.timerDown),this.video_player.plane_up=1,this.video_player.timerUp=setTimeout(function(){if(0==this.video_player.volume&&null!=this.xml_object.tracking_unmute)for(var e=this.xml_object.tracking_unmute.split(" "),i=0;i<e.length;i++)t(e[i]);this.video_player.muted=!1,this.video_player.volume=(10*this.video_player.volume+1)/10,this.video_player.volume>=.6?clearTimeout(this.video_player.timerUp):j()}.bind(this),200))}.bind(this),E=function(e){if(1==this.video_player.plane_up){if(this.video_player.finished)return;this.video_player.timerUp&&clearTimeout(this.video_player.timerUp),e||(e=0),this.video_player.timerDown=setTimeout(function(){var i=(100*this.video_player.volume-5)/100;if(i<=.01){if(this.video_player.muted=!0,this.video_player.volume=0,clearTimeout(this.video_player.timerDown),null!=this.xml_object.tracking_mute)for(var n=this.xml_object.tracking_mute.split(" "),r=0;r<n.length;r++)t(n[r])}else this.video_player.volume=i,E(e)}.bind(this),20*++e)}}.bind(this),T=function(){var e=this.video_player.offsetHeight/2,t=this.video_player.getBoundingClientRect();return window.innerHeight-e>t.top&&t.top>-1*e}.bind(this),C=(function(){if(this.video_player.wasInit&&!this.video_player.finished)if(T()){if(this.video_player.paused&&(this.video_player.play(),this.video_player.oncePaused&&null!=this.xml_object.tracking_resume))for(var e=this.xml_object.tracking_resume.split(" "),i=0;i<e.length;i++)t(e[i])}else if(!this.video_player.paused&&(this.video_player.pause(),this.video_player.oncePaused=!0,null!=this.xml_object.tracking_pause))for(var e=this.xml_object.tracking_pause.split(" "),i=0;i<e.length;i++)t(e[i])}.bind(this),function(){for(var e=[],t=0;t<this.xml_object.errors.length;t++)e.push("VAST Error: "+this.xml_object.errors[t]);return e}.bind(this)),S=function(){return this.xml_object}.bind(this),I=function(e){this.callback=e.callback,this.xml_object=new r,this.obj=e||{},this.player_max_height=e.player_max_height||0,this.player_max_width=e.player_max_width||0,this.video_player_id=e.video_player_id||"vast_player",this.video_player=void 0,this.media_type=e.media_type||["video/mp4","video/webm"],this.media_bitrate_min=e.media_bitrate_min||200,this.media_bitrate_max=e.media_bitrate_max||2500,this.xml_url=e.xml_url||void 0,1!==window.location.hostname.split(".").reverse().indexOf("betweendigital")&&1!==window.location.hostname.split(".").reverse().indexOf("perfiq")||void 0!==this.obj.adds[this.obj.section_id]&&void 0!==this.obj.adds[this.obj.section_id].vast_url&&(this.xml_url=this.obj.adds[this.obj.section_id].vast_url),this.startTime=e.startTime||0,this.in_frame=e.in_frame||!1,this.timeout_in_frame=e.timeout_in_frame||0,this.video_player=document.getElementById(this.video_player_id),g(this.xml_url).then(null,function(){this.xml_object.sendError(500),this.callback(this)}.bind(this))}.bind(this);return{init:function(e){I(e)},errors:function(){return C()},xml:function(){return S()}}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var s=i(1),l=n(s)},,,,,,,function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?i.push(t.charAt(r>>>6*(3-o)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&i.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(n))>>>6-2*r);return i}};e.exports=i}()},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
e.exports=function(e){return null!=e&&(i(e)||n(e)||!!e._isBuffer)}},function(e,t,i){!function(){var t=i(23),n=i(4).utf8,r=i(24),o=i(4).bin,a=function(e,i){e.constructor==String?e=i&&"binary"===i.encoding?o.stringToBytes(e):n.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=t.bytesToWords(e),l=8*e.length,c=1732584193,d=-271733879,u=-1732584194,h=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[l>>>5]|=128<<l%32,s[(l+64>>>9<<4)+14]=l;for(var p=a._ff,_=a._gg,m=a._hh,v=a._ii,f=0;f<s.length;f+=16){var b=c,g=d,y=u,k=h;c=p(c,d,u,h,s[f+0],7,-680876936),h=p(h,c,d,u,s[f+1],12,-389564586),u=p(u,h,c,d,s[f+2],17,606105819),d=p(d,u,h,c,s[f+3],22,-1044525330),c=p(c,d,u,h,s[f+4],7,-176418897),h=p(h,c,d,u,s[f+5],12,1200080426),u=p(u,h,c,d,s[f+6],17,-1473231341),d=p(d,u,h,c,s[f+7],22,-45705983),c=p(c,d,u,h,s[f+8],7,1770035416),h=p(h,c,d,u,s[f+9],12,-1958414417),u=p(u,h,c,d,s[f+10],17,-42063),d=p(d,u,h,c,s[f+11],22,-1990404162),c=p(c,d,u,h,s[f+12],7,1804603682),h=p(h,c,d,u,s[f+13],12,-40341101),u=p(u,h,c,d,s[f+14],17,-1502002290),d=p(d,u,h,c,s[f+15],22,1236535329),c=_(c,d,u,h,s[f+1],5,-165796510),h=_(h,c,d,u,s[f+6],9,-1069501632),u=_(u,h,c,d,s[f+11],14,643717713),d=_(d,u,h,c,s[f+0],20,-373897302),c=_(c,d,u,h,s[f+5],5,-701558691),h=_(h,c,d,u,s[f+10],9,38016083),u=_(u,h,c,d,s[f+15],14,-660478335),d=_(d,u,h,c,s[f+4],20,-405537848),c=_(c,d,u,h,s[f+9],5,568446438),h=_(h,c,d,u,s[f+14],9,-1019803690),u=_(u,h,c,d,s[f+3],14,-187363961),d=_(d,u,h,c,s[f+8],20,1163531501),c=_(c,d,u,h,s[f+13],5,-1444681467),h=_(h,c,d,u,s[f+2],9,-51403784),u=_(u,h,c,d,s[f+7],14,1735328473),d=_(d,u,h,c,s[f+12],20,-1926607734),c=m(c,d,u,h,s[f+5],4,-378558),h=m(h,c,d,u,s[f+8],11,-2022574463),u=m(u,h,c,d,s[f+11],16,1839030562),d=m(d,u,h,c,s[f+14],23,-35309556),c=m(c,d,u,h,s[f+1],4,-1530992060),h=m(h,c,d,u,s[f+4],11,1272893353),u=m(u,h,c,d,s[f+7],16,-155497632),d=m(d,u,h,c,s[f+10],23,-1094730640),c=m(c,d,u,h,s[f+13],4,681279174),h=m(h,c,d,u,s[f+0],11,-358537222),u=m(u,h,c,d,s[f+3],16,-722521979),d=m(d,u,h,c,s[f+6],23,76029189),c=m(c,d,u,h,s[f+9],4,-640364487),h=m(h,c,d,u,s[f+12],11,-421815835),u=m(u,h,c,d,s[f+15],16,530742520),d=m(d,u,h,c,s[f+2],23,-995338651),c=v(c,d,u,h,s[f+0],6,-198630844),h=v(h,c,d,u,s[f+7],10,1126891415),u=v(u,h,c,d,s[f+14],15,-1416354905),d=v(d,u,h,c,s[f+5],21,-57434055),c=v(c,d,u,h,s[f+12],6,1700485571),h=v(h,c,d,u,s[f+3],10,-1894986606),u=v(u,h,c,d,s[f+10],15,-1051523),d=v(d,u,h,c,s[f+1],21,-2054922799),c=v(c,d,u,h,s[f+8],6,1873313359),h=v(h,c,d,u,s[f+15],10,-30611744),u=v(u,h,c,d,s[f+6],15,-1560198380),d=v(d,u,h,c,s[f+13],21,1309151649),c=v(c,d,u,h,s[f+4],6,-145523070),h=v(h,c,d,u,s[f+11],10,-1120210379),u=v(u,h,c,d,s[f+2],15,718787259),d=v(d,u,h,c,s[f+9],21,-343485551),c=c+b>>>0,d=d+g>>>0,u=u+y>>>0,h=h+k>>>0}return t.endian([c,d,u,h])};a._ff=function(e,t,i,n,r,o,a){var s=e+(t&i|~t&n)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,i,n,r,o,a){var s=e+(t&n|i&~n)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,i,n,r,o,a){var s=e+(t^i^n)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,i,n,r,o,a){var s=e+(i^(t|~n))+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,i){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(a(e,i));return i&&i.asBytes?n:i&&i.asString?o.bytesToString(n):t.bytesToHex(n)}}()},function(e,t){function i(e){this.name="RavenConfigError",this.message=e}i.prototype=new Error,i.prototype.constructor=i,e.exports=i},function(e,t){var i=function(e,t,i){var n=e[t],r=e;if(t in e){var o="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),a=""+e.join(" "),s={level:o,logger:"console",extra:{arguments:e}};"assert"===t?e[0]===!1&&(a="Assertion failed: "+(e.slice(1).join(" ")||"console.assert"),s.extra.arguments=e.slice(1),i&&i(a,s)):i&&i(a,s),n&&Function.prototype.apply.call(n,r,e)}}};e.exports={wrapMethod:i}},function(e,t,i){(function(t){function n(){return+new Date}function r(e,t){return p(t)?function(i){return t(i,e)}:t}function o(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!f(M),this._hasNavigator=!f(P),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=R.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=n(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=R.location,this._lastHref=this._location&&this._location.href,this._resetBackoff();for(var e in this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}var a=i(30),s=i(31),l=i(26),c=i(5),d=c.isError,u=c.isObject,h=c.isErrorEvent,f=c.isUndefined,p=c.isFunction,_=c.isString,m=c.isArray,v=c.isEmptyObject,b=c.each,g=c.objectMerge,y=c.truncate,k=c.objectFrozen,w=c.hasKey,x=c.joinRegExp,j=c.urlencode,E=c.uuid4,T=c.htmlTreeAsString,C=c.isSameException,S=c.isSameStacktrace,I=c.parseUrl,O=c.fill,A=c.supportsFetch,N=i(27).wrapMethod,L="source protocol user pass host port path".split(" "),B=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,R="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},M=R.document,P=R.navigator;o.prototype={VERSION:"3.21.0",debug:!1,TraceKit:a,config:function(e,t){var i=this;if(i._globalServer)return this._logDebug("error","Error: Raven has already been configured"),i;if(!e)return i;var n=i._globalOptions;t&&b(t,function(e,t){"tags"===e||"extra"===e||"user"===e?i._globalContext[e]=t:n[e]=t}),i.setDSN(e),n.ignoreErrors.push(/^Script error\.?$/),n.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),n.ignoreErrors=x(n.ignoreErrors),n.ignoreUrls=!!n.ignoreUrls.length&&x(n.ignoreUrls),n.whitelistUrls=!!n.whitelistUrls.length&&x(n.whitelistUrls),n.includePaths=x(n.includePaths),n.maxBreadcrumbs=Math.max(0,Math.min(n.maxBreadcrumbs||100,100));var r={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=n.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=g(r,o):o!==!1&&(o=r),n.autoBreadcrumbs=o;var s={tryCatch:!0},l=n.instrument;return"[object Object]"==={}.toString.call(l)?l=g(s,l):l!==!1&&(l=s),n.instrument=l,a.collectWindowErrors=!!n.collectWindowErrors,i},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(a.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,i=t._parseDSN(e),n=i.path.lastIndexOf("/"),r=i.path.substr(1,n);t._dsn=e,t._globalKey=i.user,t._globalSecret=i.pass&&i.pass.substr(1),t._globalProject=i.path.substr(n+1),t._globalServer=t._getGlobalServer(i),t._globalEndpoint=t._globalServer+"/"+r+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,i){return p(e)&&(i=t||[],t=e,e=void 0),this.wrap(e,t).apply(this,i)},wrap:function(e,t,i){function n(){var n=[],o=arguments.length,a=!e||e&&e.deep!==!1;for(i&&p(i)&&i.apply(this,arguments);o--;)n[o]=a?r.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,n)}catch(t){throw r._ignoreNextOnError(),r.captureException(t,e),t}}var r=this;if(f(t)&&!p(e))return e;if(p(e)&&(t=e,e=void 0),!p(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}for(var o in t)w(t,o)&&(n[o]=t[o]);return n.prototype=t.prototype,t.__raven_wrapper__=n,n.__raven__=!0,n.__orig__=t,n},uninstall:function(){return a.report.uninstall(),this._unpatchFunctionToString(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(e,t){var i=!d(e),n=!h(e),r=h(e)&&!e.error;if(i&&n||r)return this.captureMessage(e,g({trimHeadFrames:1,stacktrace:!0},t));h(e)&&(e=e.error),this._lastCapturedException=e;try{var o=a.computeStackTrace(e);this._handleStackInfo(o,t)}catch(t){if(e!==t)throw t}return this},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){t=t||{};var i,n=g({message:e+""},t);try{throw new Error(e)}catch(e){i=e}i.name=null;var r=a.computeStackTrace(i),o=m(r.stack)&&r.stack[1],s=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||t&&t.stacktrace){t=g({fingerprint:e,trimHeadFrames:(t.trimHeadFrames||0)+1},t);var l=this._prepareFrames(r,t);n.stacktrace={frames:l.reverse()}}return this._send(n),this}}},captureBreadcrumb:function(e){var t=g({timestamp:n()/1e3},e);if(p(this._globalOptions.breadcrumbCallback)){var i=this._globalOptions.breadcrumbCallback(t);if(u(i)&&!v(i))t=i;else if(i===!1)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(s(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=r(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=r(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=r(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=R.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(M){e=e||{};var t=e.eventId||this.lastEventId();if(!t)throw new l("Missing eventId");var i=e.dsn||this._dsn;if(!i)throw new l("Missing DSN");var n=encodeURIComponent,r="";r+="?eventId="+n(t),r+="&dsn="+n(i);var o=e.user||this._globalContext.user;o&&(o.name&&(r+="&name="+n(o.name)),o.email&&(r+="&email="+n(o.email)));var a=this._getGlobalServer(this._parseDSN(i)),s=M.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/"+r,(M.head||M.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var i,n;if(this._hasDocument){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),M.createEvent?(i=M.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=M.createEventObject(),i.eventType=e);for(n in t)w(t,n)&&(i[n]=t[n]);if(M.createEvent)M.dispatchEvent(i);else try{M.fireEvent("on"+i.eventType.toLowerCase(),i)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(i){if(t._keypressTimeout=null,t._lastCapturedEvent!==i){t._lastCapturedEvent=i;var n;try{n=T(i.target)}catch(e){n="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:n})}}},_keypressEventHandler:function(){var e=this,t=1e3;return function(i){var n;try{n=i.target}catch(e){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var o=e._keypressTimeout;o||e._breadcrumbEventHandler("input")(i),clearTimeout(o),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},t)}}},_captureUrlChange:function(e,t){var i=I(this._location.href),n=I(t),r=I(e);this._lastHref=t,i.protocol===n.protocol&&i.host===n.host&&(t=n.relative),i.protocol===r.protocol&&i.host===r.host&&(e=r.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){function e(e){return function(t,n){for(var r=new Array(arguments.length),o=0;o<r.length;++o)r[o]=arguments[o];var a=r[0];return p(a)&&(r[0]=i.wrap(a)),e.apply?e.apply(this,r):e(r[0],r[1])}}function t(e){var t=R[e]&&R[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(O(t,"addEventListener",function(t){return function(n,o,a,s){try{o&&o.handleEvent&&(o.handleEvent=i.wrap(o.handleEvent))}catch(e){}var l,c,d;return r&&r.dom&&("EventTarget"===e||"Node"===e)&&(c=i._breadcrumbEventHandler("click"),d=i._keypressEventHandler(),l=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?c(e):"keypress"===t?d(e):void 0}}),t.call(this,n,i.wrap(o,void 0,l),a,s)}},n),O(t,"removeEventListener",function(e){return function(t,i,n,r){try{i=i&&(i.__raven_wrapper__?i.__raven_wrapper__:i)}catch(e){}return e.call(this,t,i,n,r)}},n))}var i=this,n=i._wrappedBuiltIns,r=this._globalOptions.autoBreadcrumbs;O(R,"setTimeout",e,n),O(R,"setInterval",e,n),R.requestAnimationFrame&&O(R,"requestAnimationFrame",function(e){return function(t){return e(i.wrap(t))}},n);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<o.length;a++)t(o[a])},_instrumentBreadcrumbs:function(){function e(e,i){e in i&&p(i[e])&&O(i,e,function(e){return t.wrap(e)})}var t=this,i=this._globalOptions.autoBreadcrumbs,n=t._wrappedBuiltIns;if(i.xhr&&"XMLHttpRequest"in R){var r=XMLHttpRequest.prototype;O(r,"open",function(e){return function(i,n){return _(n)&&n.indexOf(t._globalKey)===-1&&(this.__raven_xhr={method:i,url:n,status_code:null}),e.apply(this,arguments)}},n),O(r,"send",function(i){return function(){function n(){if(r.__raven_xhr&&4===r.readyState){try{r.__raven_xhr.status_code=r.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var r=this,o=["onload","onerror","onprogress"],a=0;a<o.length;a++)e(o[a],r);return"onreadystatechange"in r&&p(r.onreadystatechange)?O(r,"onreadystatechange",function(e){return t.wrap(e,void 0,n)}):r.onreadystatechange=n,i.apply(this,arguments)}},n)}i.xhr&&A()&&O(R,"fetch",function(e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;++n)i[n]=arguments[n];var r,o=i[0],a="GET";if("string"==typeof o?r=o:"Request"in R&&o instanceof R.Request?(r=o.url,o.method&&(a=o.method)):r=""+o,r.indexOf(t._globalKey)!==-1)return e.apply(this,i);i[1]&&i[1].method&&(a=i[1].method);var s={method:a,url:r,status_code:null};return t.captureBreadcrumb({type:"http",category:"fetch",data:s}),e.apply(this,i).then(function(e){return s.status_code=e.status,e})}},n),i.dom&&this._hasDocument&&(M.addEventListener?(M.addEventListener("click",t._breadcrumbEventHandler("click"),!1),M.addEventListener("keypress",t._keypressEventHandler(),!1)):(M.attachEvent("onclick",t._breadcrumbEventHandler("click")),M.attachEvent("onkeypress",t._keypressEventHandler())));var o=R.chrome,a=o&&o.app&&o.app.runtime,s=!a&&R.history&&history.pushState&&history.replaceState;if(i.location&&s){var l=R.onpopstate;R.onpopstate=function(){var e=t._location.href;if(t._captureUrlChange(t._lastHref,e),l)return l.apply(this,arguments)};var c=function(e){return function(){var i=arguments.length>2?arguments[2]:void 0;return i&&t._captureUrlChange(t._lastHref,i+""),e.apply(this,arguments)}};O(history,"pushState",c,n),O(history,"replaceState",c,n)}if(i.console&&"console"in R&&console.log){var d=function(e,i){t.captureBreadcrumb({message:e,level:i.level,category:"console"})};b(["debug","info","warn","error","log"],function(e,t){N(console,t,d)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){e=this._wrappedBuiltIns.shift();var t=e[0],i=e[1],n=e[2];t[i]=n}},_drainPlugins:function(){var e=this;b(this._plugins,function(t,i){var n=i[0],r=i[1];n.apply(e,[e].concat(r))})},_parseDSN:function(e){var t=B.exec(e),i={},n=7;try{for(;n--;)i[L[n]]=t[n]||""}catch(t){throw new l("Invalid DSN: "+e)}if(i.pass&&!this._globalOptions.allowSecretKey)throw new l("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return i},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(e,t){var i=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,i,t)},_prepareFrames:function(e,t){var i=this,n=[];if(e.stack&&e.stack.length&&(b(e.stack,function(t,r){var o=i._normalizeFrame(r,e.url);o&&n.push(o)}),t&&t.trimHeadFrames))for(var r=0;r<t.trimHeadFrames&&r<n.length;r++)n[r].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var i={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(i.filename=t),i.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(i.filename)||/(Raven|TraceKit)\./.test(i.function)||/raven\.(min\.)?js$/.test(i.filename)),i},_processException:function(e,t,i,n,r,o){var a=(e?e+": ":"")+(t||"");if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(a)){var s;if(r&&r.length?(i=r[0].filename||i,r.reverse(),s={frames:r}):i&&(s={frames:[{filename:i,lineno:n,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(i))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(i))){var l=g({exception:{values:[{type:e,value:t,stacktrace:s}]},culprit:i},o);this._send(l)}}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=y(e.message,t)),e.exception){var i=e.exception.values[0];i.value=y(i.value,t)}var n=e.request;return n&&(n.url&&(n.url=y(n.url,this._globalOptions.maxUrlLength)),n.Referer&&(n.Referer=y(n.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,i,n,r=["to","from","url"],o=0;o<e.values.length;++o)if(i=e.values[o],i.hasOwnProperty("data")&&u(i.data)&&!k(i.data)){n=g({},i.data);for(var a=0;a<r.length;++a)t=r[a],n.hasOwnProperty(t)&&n[t]&&(n[t]=y(n[t],this._globalOptions.maxUrlLength));e.values[o].data=n}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&P.userAgent&&(e.headers={"User-Agent":navigator.userAgent}),this._hasDocument&&(M.location&&M.location.href&&(e.url=M.location.href),M.referrer&&(e.headers||(e.headers={}),e.headers.Referer=M.referrer)),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&n()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.culprit!==t.culprit)&&(e.stacktrace||t.stacktrace?S(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||C(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var i;try{i=A()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),i=1e3*parseInt(i,10)}catch(e){}this._backoffDuration=i?i:2*this._backoffDuration||1e3,this._backoffStart=n()}}},_send:function(e){var t=this._globalOptions,i={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();if(r&&(i.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,e=g(i,e),e.tags=g(g({},this._globalContext.tags),e.tags),e.extra=g(g({},this._globalContext.extra),e.extra),e.extra["session:duration"]=n()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),v(e.tags)&&delete e.tags,this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),p(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!v(e)&&(!p(t.shouldSendCallback)||t.shouldSendCallback(e)))return this._shouldBackoff()?void this._logDebug("warn","Raven dropped error due to backoff: ",e):void("number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e))},_getUuid:function(){return E()},_sendProcessedPayload:function(e,t){var i=this,n=this._globalOptions;if(this.isSetup()){if(e=this._trimPacket(e),!this._globalOptions.allowDuplicates&&this._isRepeatData(e))return void this._logDebug("warn","Raven dropped repeat event: ",e);this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var r={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(r.sentry_secret=this._globalSecret);var o=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:e.event_id,level:e.level||"error"});var a=this._globalEndpoint;(n.transport||this._makeRequest).call(this,{url:a,auth:r,data:e,options:n,onSuccess:function(){i._resetBackoff(),i._triggerEvent("success",{data:e,src:a}),t&&t()},onError:function(n){i._logDebug("error","Raven transport failed to send: ",n),n.request&&i._setBackoffState(n.request),i._triggerEvent("failure",{data:e,src:a}),n=n||new Error("Raven send failed (no additional details provided)"),t&&t(n)}})}},_makeRequest:function(e){var t=e.url+"?"+j(e.auth),i=null;if(e.options.headers&&(i=this._evaluateHeaders(e.options.headers)),A()){var n={method:"POST",body:s(e.data)};return i&&(n.headers=i),R.fetch(t,n).then(function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var i=new Error("Sentry error code: "+t.status);i.request=t,e.onError&&e.onError(i)}}).catch(function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))})}var r=R.XMLHttpRequest&&new R.XMLHttpRequest;if(r){var o="withCredentials"in r||"undefined"!=typeof XDomainRequest;o&&("withCredentials"in r?r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+r.status);t.request=r,e.onError(t)}}:(r=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(r.onload=e.onSuccess),e.onError&&(r.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=r,e.onError(t)})),r.open("POST",t),i&&b(i,function(e,t){r.setRequestHeader(e,t)}),r.send(s(e.data)))}},_evaluateHeaders:function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t[i]="function"==typeof n?n():n}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){f(t)?delete this._globalContext[e]:this._globalContext[e]=g(this._globalContext[e]||{},t)}},o.prototype.setUser=o.prototype.setUserContext,o.prototype.setReleaseContext=o.prototype.setRelease,e.exports=o}).call(t,function(){return this}())},function(e,t,i){(function(t){var n=i(28),r="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},o=r.Raven,a=new n;a.noConflict=function(){return r.Raven=o,a},a.afterLoad(),e.exports=a}).call(t,function(){return this}())},function(e,t,i){(function(t){function n(){return"undefined"==typeof document||null==document.location?"":document.location.href}var r=i(5),o={collectWindowErrors:!0,debug:!1},a="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},s=[].slice,l="?",c=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;o.report=function(){function e(e){h(),b.push(e)}function t(e){for(var t=b.length-1;t>=0;--t)b[t]===e&&b.splice(t,1)}function i(){f(),b=[]}function d(e,t){var i=null;if(!t||o.collectWindowErrors){for(var n in b)if(b.hasOwnProperty(n))try{b[n].apply(null,[e].concat(s.call(arguments,2)))}catch(e){i=e}if(i)throw i}}function u(e,t,i,a,s){var u=null,h=r.isErrorEvent(s)?s.error:s,f=r.isErrorEvent(e)?e.message:e;if(k)o.computeStackTrace.augmentStackTraceWithInitialElement(k,t,i,f),p();else if(h&&r.isError(h))u=o.computeStackTrace(h),d(u,!0);else{var _,v={url:t,line:i,column:a},b=void 0;if("[object String]"==={}.toString.call(f)){var _=f.match(c);_&&(b=_[1],f=_[2])}v.func=l,u={name:b,message:f,url:n(),stack:[v]},d(u,!0)}return!!m&&m.apply(this,arguments)}function h(){v||(m=a.onerror,a.onerror=u,v=!0)}function f(){v&&(a.onerror=m,v=!1,m=void 0)}function p(){var e=k,t=g;g=null,k=null,y=null,d.apply(null,[e,!1].concat(t))}function _(e,t){var i=s.call(arguments,1);if(k){if(y===e)return;p()}var n=o.computeStackTrace(e);if(k=n,y=e,g=i,setTimeout(function(){y===e&&p()},n.incomplete?2e3:0),t!==!1)throw e}var m,v,b=[],g=null,y=null,k=null;return _.subscribe=e,_.unsubscribe=t,_.uninstall=i,_}(),o.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,i,r,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=e.stack.split("\n"),h=[],f=(/^(.*) is undefined$/.exec(e.message),0),p=u.length;f<p;++f){if(i=o.exec(u[f])){var _=i[2]&&0===i[2].indexOf("native"),m=i[2]&&0===i[2].indexOf("eval");m&&(t=d.exec(i[2]))&&(i[2]=t[1],i[3]=t[2],i[4]=t[3]),r={url:_?null:i[2],func:i[1]||l,args:_?[i[2]]:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}else if(i=s.exec(u[f]))r={url:i[2],func:i[1]||l,args:[],line:+i[3],column:i[4]?+i[4]:null};else{if(!(i=a.exec(u[f])))continue;var m=i[3]&&i[3].indexOf(" > eval")>-1;m&&(t=c.exec(i[3]))?(i[3]=t[1],i[4]=t[2],i[5]=null):0!==f||i[5]||"undefined"==typeof e.columnNumber||(h[0].column=e.columnNumber+1),r={url:i[3],func:i[1]||l,args:i[2]?i[2].split(","):[],line:i[4]?+i[4]:null,column:i[5]?+i[5]:null}}!r.func&&r.line&&(r.func=l),h.push(r)}return h.length?{name:e.name,message:e.message,url:n(),stack:h}:null}}function t(e,t,i,n){var r={url:t,line:i};if(r.url&&r.line){if(e.incomplete=!1,r.func||(r.func=l),e.stack.length>0&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;if(!e.stack[0].line&&e.stack[0].func===r.func)return e.stack[0].line=r.line,!1}return e.stack.unshift(r),e.partial=!0,!0}return e.incomplete=!0,!1}function i(e,a){for(var s,c,d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],h={},f=!1,p=i.caller;p&&!f;p=p.caller)if(p!==r&&p!==o.report){if(c={url:null,func:l,line:null,column:null},p.name?c.func=p.name:(s=d.exec(p.toString()))&&(c.func=s[1]),"undefined"==typeof c.func)try{c.func=s.input.substring(0,s.input.indexOf("{"))}catch(e){}h[""+p]?f=!0:h[""+p]=!0,u.push(c)}a&&u.splice(0,a);var _={name:e.name,message:e.message,url:n(),stack:u};return t(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),_}function r(t,r){var a=null;r=null==r?0:+r;try{if(a=e(t))return a}catch(e){if(o.debug)throw e}try{if(a=i(t,r+1))return a}catch(e){if(o.debug)throw e}return{name:t.name,message:t.message,url:n()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}(),e.exports=o}).call(t,function(){return this}())},function(e,t){function i(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}function n(e,t,i,n){return JSON.stringify(e,o(t,n),i)}function r(e){var t={stack:e.stack,message:e.message,name:e.name};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function o(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,i(n,t)).join(".")+"]"}),function(a,s){if(n.length>0){var l=i(n,this);~l?n.splice(l+1):n.push(this),~l?o.splice(l,1/0,a):o.push(a),~i(n,s)&&(s=t.call(this,a,s))}else n.push(s);return null==e?s instanceof Error?r(s):s:e.call(this,a,s)}}t=e.exports=n,t.getSerialize=o},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){_&&f&&(_=!1,f.length?p=f.concat(p):m=-1,p.length&&s())}function s(){if(!_){var e=r(a);_=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,_=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,u,h=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var f,p=[],_=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new l(e,t)),1!==p.length||_||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,i){(function(e,t){!function(e,i){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return _[p]=n,f(p),p++}function r(e){delete _[e]}function o(e){var t=e.callback,n=e.args;
switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}function a(e){if(m)setTimeout(a,0,e);else{var t=_[e];if(t){m=!0;try{o(t)}finally{r(e),m=!1}}}}function s(){f=function(e){t.nextTick(function(){a(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}function c(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(t)&&a(+i.data.slice(t.length))};e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),f=function(i){e.postMessage(t+i,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},f=function(t){e.port2.postMessage(t)}}function u(){var e=v.documentElement;f=function(t){var i=v.createElement("script");i.onreadystatechange=function(){a(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function h(){f=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var f,p=1,_={},m=!1,v=e.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(e);b=b&&b.setTimeout?b:e,"[object process]"==={}.toString.call(e.process)?s():l()?c():e.MessageChannel?d():v&&"onreadystatechange"in v.createElement("script")?u():h(),b.setImmediate=n,b.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),i(32))},function(e,t,i){(function(e){function n(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new n(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(33),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())}]);